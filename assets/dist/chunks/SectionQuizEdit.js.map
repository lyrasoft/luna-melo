{"version":3,"file":"SectionQuizEdit.js","sources":["../../node_modules/bootstrap-vue-next/dist/useFormCheck-Bcx8Ea7M.mjs","../../node_modules/bootstrap-vue-next/dist/BFormCheckboxGroup.vue_vue_type_script_setup_true_lang-Dx_mpGFE.mjs","../../node_modules/bootstrap-vue-next/dist/BFormRadioGroup.vue_vue_type_script_setup_true_lang-DaMHx4U3.mjs","../../node_modules/bootstrap-vue-next/dist/BFormTextarea.vue_vue_type_script_setup_true_lang-os9418J-.mjs","../../src/components/segment-edit/question/QuestionTypeSelector.vue","../../src/components/segment-edit/question/QuestionTypeSelector.vue","../../src/features/question/useQuestionController.ts","../../src/features/question/useQuestionPresenter.ts","../../src/components/segment-edit/question/QuestionItem.vue","../../src/components/segment-edit/question/QuestionItem.vue","../../src/components/segment-edit/question/OptionEdit.vue","../../src/components/segment-edit/question/OptionEdit.vue","../../src/features/question/useOptionController.ts","../../src/components/segment-edit/question/OptionList.vue","../../src/components/segment-edit/question/OptionList.vue","../../src/components/uploader/ImageUploader.vue","../../src/components/uploader/ImageUploader.vue","../../src/components/segment-edit/question/QuestionEdit.vue","../../src/components/segment-edit/question/QuestionEdit.vue","../../src/components/segment-edit/section/SectionQuizEdit.vue","../../src/components/segment-edit/section/SectionQuizEdit.vue"],"sourcesContent":["import { computed, toValue, readonly, toRef } from \"vue\";\nimport { u as useAriaInvalid } from \"./useAriaInvalid-BTUbGj3Y.mjs\";\nimport { u as useStateClass } from \"./useStateClass-BGbSLWFN.mjs\";\nconst getClasses = (items) => computed(() => {\n  const resolvedItems = toValue(items);\n  return {\n    \"form-check\": resolvedItems.plain === false && resolvedItems.button === false && resolvedItems.hasDefaultSlot,\n    \"form-check-reverse\": resolvedItems.reverse === true,\n    \"form-check-inline\": resolvedItems.inline === true,\n    \"form-switch\": resolvedItems.switch === true,\n    [`form-control-${resolvedItems.size}`]: resolvedItems.size !== void 0 && resolvedItems.size !== \"md\" && resolvedItems.button === false\n  };\n});\nconst getInputClasses = (items) => {\n  const resolvedItems = readonly(toRef(items));\n  const stateClass = useStateClass(() => resolvedItems.value.state ?? null);\n  return computed(() => [\n    stateClass.value,\n    {\n      \"form-check-input\": resolvedItems.value.plain === false && resolvedItems.value.button === false,\n      \"btn-check\": resolvedItems.value.button === true\n    }\n  ]);\n};\nconst getLabelClasses = (items) => computed(() => {\n  const resolvedItems = toValue(items);\n  return {\n    \"form-check-label\": resolvedItems.plain === false && resolvedItems.button === false,\n    \"btn\": resolvedItems.button === true,\n    [`btn-${resolvedItems.buttonVariant}`]: resolvedItems.button === true && resolvedItems.buttonVariant !== void 0 && resolvedItems.buttonVariant !== null,\n    [`btn-${resolvedItems.size}`]: resolvedItems.button && resolvedItems.size && resolvedItems.size !== \"md\"\n  };\n});\nconst getGroupAttr = (items) => {\n  const resolvedItems = readonly(toRef(items));\n  const computedAriaInvalid = useAriaInvalid(\n    () => resolvedItems.value.ariaInvalid,\n    () => resolvedItems.value.state\n  );\n  return computed(() => ({\n    \"aria-invalid\": computedAriaInvalid.value,\n    \"aria-required\": resolvedItems.value.required === true ? true : void 0\n  }));\n};\nconst getGroupClasses = (items) => computed(() => {\n  const resolvedItems = toValue(items);\n  return {\n    \"was-validated\": resolvedItems.validated === true,\n    \"btn-group\": resolvedItems.buttons === true && resolvedItems.stacked === false,\n    \"btn-group-vertical\": resolvedItems.stacked === true && resolvedItems.buttons === true,\n    [`btn-group-${resolvedItems.size}`]: resolvedItems.size !== void 0\n  };\n});\nexport {\n  getInputClasses as a,\n  getLabelClasses as b,\n  getGroupAttr as c,\n  getGroupClasses as d,\n  getClasses as g\n};\n//# sourceMappingURL=useFormCheck-Bcx8Ea7M.mjs.map\n","import { defineComponent, mergeModels, useSlots, useAttrs, useModel, computed, inject, useTemplateRef, createBlock, openBlock, mergeProps, unref, withCtx, withDirectives, createElementBlock, createCommentVNode, createElementVNode, vModelCheckbox, normalizeClass, renderSlot, provide, toRef, Fragment, renderList, createTextVNode, toDisplayString } from \"vue\";\nimport { j as useFocus } from \"./index-Bg04zFDG.mjs\";\nimport { g as getClasses, a as getInputClasses, b as getLabelClasses, c as getGroupAttr, d as getGroupClasses } from \"./useFormCheck-Bcx8Ea7M.mjs\";\nimport { j as checkboxGroupKey } from \"./keys-BLeKMItg.mjs\";\nimport { _ as _sfc_main$2 } from \"./ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH-.mjs\";\nimport { i as isEmptySlot } from \"./dom-DVb-f0ZG.mjs\";\nimport { u as useDefaults } from \"./useDefaults-DESCdb0p.mjs\";\nimport { u as useId } from \"./useId-t29UARy6.mjs\";\nconst _hoisted_1$1 = [\"id\", \"disabled\", \"required\", \"name\", \"form\", \"aria-label\", \"aria-labelledby\", \"aria-required\", \"value\", \"true-value\", \"false-value\", \"indeterminate\"];\nconst _hoisted_2 = [\"for\"];\nconst _sfc_main$1 = /* @__PURE__ */ defineComponent({\n  ...{\n    inheritAttrs: false\n  },\n  __name: \"BFormCheckbox\",\n  props: /* @__PURE__ */ mergeModels({\n    ariaLabel: { default: void 0 },\n    ariaLabelledby: { default: void 0 },\n    autofocus: { type: Boolean, default: false },\n    button: { type: Boolean, default: false },\n    buttonGroup: { type: Boolean, default: false },\n    buttonVariant: { default: null },\n    disabled: { type: Boolean, default: false },\n    form: { default: void 0 },\n    id: { default: void 0 },\n    inline: { type: Boolean, default: false },\n    name: { default: void 0 },\n    plain: { type: Boolean, default: false },\n    required: { type: Boolean, default: void 0 },\n    reverse: { type: Boolean, default: false },\n    size: { default: void 0 },\n    state: { type: [Boolean, null], default: null },\n    switch: { type: Boolean, default: false },\n    uncheckedValue: { type: [Array, Set, String, Boolean, Object, Number, null], default: false },\n    wrapperAttrs: { default: void 0 },\n    inputClass: { default: void 0 },\n    value: { type: [String, Boolean, Array, Set, Object, Number, null], default: true }\n  }, {\n    \"modelValue\": { type: [Array, Set, String, Boolean, Object, Number, null], ...{\n      default: void 0\n    } },\n    \"modelModifiers\": {},\n    \"indeterminate\": { type: Boolean, ...{\n      default: false\n    } },\n    \"indeterminateModifiers\": {}\n  }),\n  emits: [\"update:modelValue\", \"update:indeterminate\"],\n  setup(__props, { expose: __expose }) {\n    const _props = __props;\n    const props = useDefaults(_props, \"BFormCheckbox\");\n    const slots = useSlots();\n    const attrs = useAttrs();\n    const modelValue = useModel(__props, \"modelValue\");\n    const indeterminate = useModel(\n      __props,\n      \"indeterminate\"\n    );\n    const processedAttrs = computed(() => {\n      const { class: wrapperClass, ...inputAttrs } = attrs;\n      return { wrapperClass, inputAttrs };\n    });\n    const computedId = useId(() => props.id, \"form-check\");\n    const parentData = inject(checkboxGroupKey, null);\n    const input = useTemplateRef(\"_input\");\n    const { focused } = useFocus(input, {\n      initialValue: props.autofocus\n    });\n    const hasDefaultSlot = computed(() => !isEmptySlot(slots.default));\n    const localValue = computed({\n      get: () => parentData ? parentData.modelValue.value : modelValue.value,\n      set: (newVal) => {\n        if (newVal === void 0) return;\n        indeterminate.value = false;\n        if (parentData !== null && Array.isArray(newVal)) {\n          parentData.modelValue.value = newVal;\n          return;\n        }\n        modelValue.value = newVal;\n      }\n    });\n    const computedRequired = computed(\n      () => !!(props.name ?? parentData?.name.value) && (props.required || parentData?.required.value)\n    );\n    const isButtonGroup = computed(() => props.buttonGroup || (parentData?.buttons.value ?? false));\n    const classesObject = computed(() => ({\n      plain: props.plain || (parentData?.plain.value ?? false),\n      button: props.button || (parentData?.buttons.value ?? false),\n      inline: props.inline || (parentData?.inline.value ?? false),\n      reverse: props.reverse || (parentData?.reverse.value ?? false),\n      switch: props.switch || (parentData?.switch.value ?? false),\n      state: props.state === true || props.state === false ? props.state : parentData?.state.value ?? null,\n      size: props.size ?? parentData?.size.value ?? \"md\",\n      // This is where the true default is made\n      buttonVariant: props.buttonVariant ?? parentData?.buttonVariant.value ?? \"secondary\",\n      // This is where the true default is made\n      hasDefaultSlot: hasDefaultSlot.value\n    }));\n    const wrapperClasses = getClasses(classesObject);\n    const computedWrapperClasses = computed(() => [\n      wrapperClasses.value,\n      processedAttrs.value.wrapperClass\n    ]);\n    const inputClasses = getInputClasses(classesObject);\n    const computedInputClasses = computed(() => [inputClasses.value, props.inputClass]);\n    const labelClasses = getLabelClasses(classesObject);\n    __expose({\n      blur: () => {\n        focused.value = false;\n      },\n      element: input,\n      focus: () => {\n        focused.value = true;\n      }\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(_sfc_main$2, mergeProps({ skip: isButtonGroup.value }, unref(props).wrapperAttrs, { class: computedWrapperClasses.value }), {\n        default: withCtx(() => [\n          withDirectives(createElementVNode(\"input\", mergeProps({\n            id: unref(computedId),\n            ref: \"_input\",\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => localValue.value = $event),\n            class: computedInputClasses.value,\n            type: \"checkbox\",\n            disabled: unref(props).disabled || unref(parentData)?.disabled.value,\n            required: computedRequired.value || void 0,\n            name: unref(props).name || unref(parentData)?.name.value,\n            form: unref(props).form || unref(parentData)?.form.value,\n            \"aria-label\": unref(props).ariaLabel,\n            \"aria-labelledby\": unref(props).ariaLabelledby,\n            \"aria-required\": computedRequired.value || void 0,\n            value: unref(props).value,\n            \"true-value\": unref(props).value,\n            \"false-value\": unref(props).uncheckedValue,\n            indeterminate: indeterminate.value || void 0\n          }, processedAttrs.value.inputAttrs), null, 16, _hoisted_1$1), [\n            [vModelCheckbox, localValue.value]\n          ]),\n          hasDefaultSlot.value || unref(props).plain === false ? (openBlock(), createElementBlock(\"label\", {\n            key: 0,\n            for: unref(computedId),\n            class: normalizeClass(unref(labelClasses))\n          }, [\n            renderSlot(_ctx.$slots, \"default\")\n          ], 10, _hoisted_2)) : createCommentVNode(\"\", true)\n        ]),\n        _: 3\n      }, 16, [\"skip\", \"class\"]);\n    };\n  }\n});\nconst _hoisted_1 = [\"id\"];\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  __name: \"BFormCheckboxGroup\",\n  props: /* @__PURE__ */ mergeModels({\n    ariaInvalid: { type: [Boolean, String], default: void 0 },\n    autofocus: { type: Boolean, default: false },\n    buttonVariant: { default: \"secondary\" },\n    buttons: { type: Boolean, default: false },\n    disabled: { type: Boolean, default: false },\n    disabledField: { default: \"disabled\" },\n    form: { default: void 0 },\n    id: { default: void 0 },\n    name: { default: void 0 },\n    options: { default: () => [] },\n    plain: { type: Boolean, default: false },\n    required: { type: Boolean, default: false },\n    reverse: { type: Boolean, default: false },\n    size: { default: \"md\" },\n    stacked: { type: Boolean, default: false },\n    state: { type: [Boolean, null], default: null },\n    switches: { type: Boolean, default: false },\n    textField: { default: \"text\" },\n    validated: { type: Boolean, default: false },\n    valueField: { default: \"value\" }\n  }, {\n    \"modelValue\": {\n      default: () => []\n    },\n    \"modelModifiers\": {}\n  }),\n  emits: [\"update:modelValue\"],\n  setup(__props, { expose: __expose }) {\n    const _props = __props;\n    const props = useDefaults(_props, \"BFormCheckboxGroup\");\n    const modelValue = useModel(__props, \"modelValue\");\n    const computedId = useId(() => props.id, \"checkbox\");\n    const computedName = useId(() => props.name, \"checkbox\");\n    const element = useTemplateRef(\"_element\");\n    const { focused } = useFocus(element, {\n      initialValue: props.autofocus\n    });\n    provide(checkboxGroupKey, {\n      modelValue,\n      switch: toRef(() => props.switches),\n      buttonVariant: toRef(() => props.buttonVariant),\n      form: toRef(() => props.form),\n      name: computedName,\n      state: toRef(() => props.state),\n      plain: toRef(() => props.plain),\n      size: toRef(() => props.size),\n      inline: toRef(() => !props.stacked),\n      reverse: toRef(() => props.reverse),\n      required: toRef(() => props.required),\n      buttons: toRef(() => props.buttons),\n      disabled: toRef(() => props.disabled)\n    });\n    const normalizeOptions = computed(\n      () => props.options.map(\n        (el) => typeof el === \"string\" || typeof el === \"number\" ? {\n          value: el,\n          disabled: props.disabled,\n          text: el.toString()\n        } : {\n          ...el,\n          value: el[props.valueField],\n          disabled: el[props.disabledField],\n          text: el[props.textField]\n        }\n      )\n    );\n    const classesObject = computed(() => ({\n      required: props.required,\n      ariaInvalid: props.ariaInvalid,\n      state: props.state,\n      validated: props.validated,\n      buttons: props.buttons,\n      stacked: props.stacked,\n      size: props.size\n    }));\n    const computedAttrs = getGroupAttr(classesObject);\n    const computedClasses = getGroupClasses(classesObject);\n    __expose({\n      blur: () => {\n        focused.value = false;\n      },\n      focus: () => {\n        focused.value = true;\n      }\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", mergeProps(unref(computedAttrs), {\n        id: unref(computedId),\n        ref: \"_element\",\n        role: \"group\",\n        class: [unref(computedClasses), \"bv-no-focus-ring\"],\n        tabindex: \"-1\"\n      }), [\n        renderSlot(_ctx.$slots, \"first\"),\n        (openBlock(true), createElementBlock(Fragment, null, renderList(normalizeOptions.value, (item, index) => {\n          return openBlock(), createBlock(_sfc_main$1, mergeProps({ key: index }, { ref_for: true }, item), {\n            default: withCtx(() => [\n              renderSlot(_ctx.$slots, \"option\", mergeProps({ ref_for: true }, item), () => [\n                createTextVNode(toDisplayString(item.text), 1)\n              ])\n            ]),\n            _: 2\n          }, 1040);\n        }), 128)),\n        renderSlot(_ctx.$slots, \"default\")\n      ], 16, _hoisted_1);\n    };\n  }\n});\nexport {\n  _sfc_main$1 as _,\n  _sfc_main as a\n};\n//# sourceMappingURL=BFormCheckboxGroup.vue_vue_type_script_setup_true_lang-Dx_mpGFE.mjs.map\n","import { defineComponent, mergeModels, useSlots, useModel, inject, useTemplateRef, computed, createBlock, openBlock, normalizeClass, unref, withCtx, withDirectives, createElementBlock, createCommentVNode, createElementVNode, mergeProps, vModelRadio, renderSlot, provide, toRef, Fragment, renderList, createTextVNode, toDisplayString } from \"vue\";\nimport { l as radioGroupKey } from \"./keys-BLeKMItg.mjs\";\nimport { j as useFocus } from \"./index-Bg04zFDG.mjs\";\nimport { g as getClasses, a as getInputClasses, b as getLabelClasses, c as getGroupAttr, d as getGroupClasses } from \"./useFormCheck-Bcx8Ea7M.mjs\";\nimport { i as isEmptySlot } from \"./dom-DVb-f0ZG.mjs\";\nimport { _ as _sfc_main$2 } from \"./ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH-.mjs\";\nimport { u as useDefaults } from \"./useDefaults-DESCdb0p.mjs\";\nimport { u as useId } from \"./useId-t29UARy6.mjs\";\nconst _hoisted_1$1 = [\"id\", \"disabled\", \"required\", \"name\", \"form\", \"aria-label\", \"aria-labelledby\", \"value\", \"aria-required\"];\nconst _hoisted_2 = [\"for\"];\nconst _sfc_main$1 = /* @__PURE__ */ defineComponent({\n  ...{\n    inheritAttrs: false\n  },\n  __name: \"BFormRadio\",\n  props: /* @__PURE__ */ mergeModels({\n    ariaLabel: { default: void 0 },\n    ariaLabelledby: { default: void 0 },\n    autofocus: { type: Boolean, default: false },\n    button: { type: Boolean, default: false },\n    buttonGroup: { type: Boolean, default: false },\n    buttonVariant: { default: null },\n    disabled: { type: Boolean, default: false },\n    form: { default: void 0 },\n    id: { default: void 0 },\n    inline: { type: Boolean, default: false },\n    name: { default: void 0 },\n    plain: { type: Boolean, default: false },\n    required: { type: Boolean, default: false },\n    reverse: { type: Boolean, default: false },\n    size: { default: void 0 },\n    state: { type: [Boolean, null], default: null },\n    value: { type: [Boolean, String, Array, Object, Number, null], default: true }\n  }, {\n    \"modelValue\": { type: [Boolean, String, Array, Object, Number, null], ...{\n      default: void 0\n    } },\n    \"modelModifiers\": {}\n  }),\n  emits: [\"update:modelValue\"],\n  setup(__props, { expose: __expose }) {\n    const _props = __props;\n    const props = useDefaults(_props, \"BFormRadio\");\n    const slots = useSlots();\n    const modelValue = useModel(__props, \"modelValue\");\n    const computedId = useId(() => props.id, \"form-check\");\n    const parentData = inject(radioGroupKey, null);\n    const input = useTemplateRef(\"_input\");\n    const { focused } = useFocus(input, {\n      initialValue: props.autofocus\n    });\n    const hasDefaultSlot = computed(() => !isEmptySlot(slots.default));\n    const localValue = computed({\n      get: () => parentData ? parentData.modelValue.value : modelValue.value,\n      set: (newValue) => {\n        if (newValue === void 0) return;\n        if (parentData !== null) {\n          parentData.modelValue.value = newValue;\n          return;\n        }\n        modelValue.value = newValue;\n      }\n    });\n    const computedRequired = computed(\n      () => !!(props.name ?? parentData?.name.value) && (props.required || parentData?.required.value)\n    );\n    const isButtonGroup = computed(() => props.buttonGroup || (parentData?.buttons.value ?? false));\n    const classesObject = computed(() => ({\n      plain: props.plain || (parentData?.plain.value ?? false),\n      button: props.button || (parentData?.buttons.value ?? false),\n      inline: props.inline || (parentData?.inline.value ?? false),\n      state: props.state || parentData?.state.value,\n      reverse: props.reverse || (parentData?.reverse.value ?? false),\n      size: props.size ?? parentData?.size.value ?? \"md\",\n      // This is where the true default is made\n      buttonVariant: props.buttonVariant ?? parentData?.buttonVariant.value ?? \"secondary\",\n      // This is where the true default is made\n      hasDefaultSlot: hasDefaultSlot.value\n    }));\n    const computedClasses = getClasses(classesObject);\n    const inputClasses = getInputClasses(classesObject);\n    const labelClasses = getLabelClasses(classesObject);\n    __expose({\n      blur: () => {\n        focused.value = false;\n      },\n      element: input,\n      focus: () => {\n        focused.value = true;\n      }\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(_sfc_main$2, {\n        skip: isButtonGroup.value,\n        class: normalizeClass(unref(computedClasses))\n      }, {\n        default: withCtx(() => [\n          withDirectives(createElementVNode(\"input\", mergeProps({ id: unref(computedId) }, _ctx.$attrs, {\n            ref: \"_input\",\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => localValue.value = $event),\n            class: unref(inputClasses),\n            type: \"radio\",\n            disabled: unref(props).disabled || unref(parentData)?.disabled.value,\n            required: computedRequired.value || void 0,\n            name: unref(props).name || unref(parentData)?.name.value,\n            form: unref(props).form || unref(parentData)?.form.value,\n            \"aria-label\": unref(props).ariaLabel,\n            \"aria-labelledby\": unref(props).ariaLabelledby,\n            value: unref(props).value,\n            \"aria-required\": computedRequired.value || void 0\n          }), null, 16, _hoisted_1$1), [\n            [vModelRadio, localValue.value]\n          ]),\n          hasDefaultSlot.value || unref(props).plain === false ? (openBlock(), createElementBlock(\"label\", {\n            key: 0,\n            for: unref(computedId),\n            class: normalizeClass(unref(labelClasses))\n          }, [\n            renderSlot(_ctx.$slots, \"default\")\n          ], 10, _hoisted_2)) : createCommentVNode(\"\", true)\n        ]),\n        _: 3\n      }, 8, [\"skip\", \"class\"]);\n    };\n  }\n});\nconst _hoisted_1 = [\"id\"];\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  __name: \"BFormRadioGroup\",\n  props: /* @__PURE__ */ mergeModels({\n    ariaInvalid: { type: [Boolean, String], default: void 0 },\n    autofocus: { type: Boolean, default: false },\n    buttonVariant: { default: \"secondary\" },\n    buttons: { type: Boolean, default: false },\n    disabled: { type: Boolean, default: false },\n    disabledField: { default: \"disabled\" },\n    form: { default: void 0 },\n    id: { default: void 0 },\n    name: { default: void 0 },\n    options: { default: () => [] },\n    plain: { type: Boolean, default: false },\n    required: { type: Boolean, default: false },\n    reverse: { type: Boolean, default: false },\n    size: { default: \"md\" },\n    stacked: { type: Boolean, default: false },\n    state: { type: [Boolean, null], default: null },\n    textField: { default: \"text\" },\n    validated: { type: Boolean, default: false },\n    valueField: { default: \"value\" }\n  }, {\n    \"modelValue\": {\n      default: null\n    },\n    \"modelModifiers\": {}\n  }),\n  emits: [\"update:modelValue\"],\n  setup(__props, { expose: __expose }) {\n    const _props = __props;\n    const props = useDefaults(_props, \"BFormRadioGroup\");\n    const modelValue = useModel(__props, \"modelValue\");\n    const computedId = useId(() => props.id, \"radio\");\n    const computedName = useId(() => props.name, \"checkbox\");\n    const element = useTemplateRef(\"_element\");\n    const { focused } = useFocus(element, {\n      initialValue: props.autofocus\n    });\n    provide(radioGroupKey, {\n      modelValue,\n      buttonVariant: toRef(() => props.buttonVariant),\n      form: toRef(() => props.form),\n      name: computedName,\n      buttons: toRef(() => props.buttons),\n      state: toRef(() => props.state),\n      plain: toRef(() => props.plain),\n      size: toRef(() => props.size),\n      inline: toRef(() => !props.stacked),\n      reverse: toRef(() => props.reverse),\n      required: toRef(() => props.required),\n      disabled: toRef(() => props.disabled)\n    });\n    const normalizeOptions = computed(\n      () => props.options.map(\n        (el) => typeof el === \"string\" || typeof el === \"number\" ? {\n          value: el,\n          disabled: props.disabled,\n          text: el.toString()\n        } : {\n          ...el,\n          value: el[props.valueField],\n          disabled: el[props.disabledField],\n          text: el[props.textField]\n        }\n      )\n    );\n    const classesObject = computed(() => ({\n      required: props.required,\n      ariaInvalid: props.ariaInvalid,\n      state: props.state,\n      validated: props.validated,\n      buttons: props.buttons,\n      stacked: props.stacked,\n      size: props.size\n    }));\n    const computedAttrs = getGroupAttr(classesObject);\n    const computedClasses = getGroupClasses(classesObject);\n    __expose({\n      blur: () => {\n        focused.value = false;\n      },\n      focus: () => {\n        focused.value = true;\n      }\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", mergeProps(unref(computedAttrs), {\n        id: unref(computedId),\n        ref: \"_element\",\n        role: \"radiogroup\",\n        class: [unref(computedClasses), \"bv-no-focus-ring\"],\n        tabindex: \"-1\"\n      }), [\n        renderSlot(_ctx.$slots, \"first\"),\n        (openBlock(true), createElementBlock(Fragment, null, renderList(normalizeOptions.value, (item, index) => {\n          return openBlock(), createBlock(_sfc_main$1, mergeProps({ key: index }, { ref_for: true }, item), {\n            default: withCtx(() => [\n              renderSlot(_ctx.$slots, \"option\", mergeProps({ ref_for: true }, item), () => [\n                createTextVNode(toDisplayString(item.text), 1)\n              ])\n            ]),\n            _: 2\n          }, 1040);\n        }), 128)),\n        renderSlot(_ctx.$slots, \"default\")\n      ], 16, _hoisted_1);\n    };\n  }\n});\nexport {\n  _sfc_main$1 as _,\n  _sfc_main as a\n};\n//# sourceMappingURL=BFormRadioGroup.vue_vue_type_script_setup_true_lang-DaMHx4U3.mjs.map\n","import { ref, computed, toValue, onMounted, nextTick, defineComponent, mergeModels, useModel, useTemplateRef, createElementBlock, openBlock, unref, normalizeStyle, normalizeClass } from \"vue\";\nimport { u as useDefaults } from \"./useDefaults-DESCdb0p.mjs\";\nimport { n as normalizeInput, u as useFormInput } from \"./useFormInput-CfzQTcFF.mjs\";\nimport { a as isVisible } from \"./dom-DVb-f0ZG.mjs\";\nimport { u as useToNumber } from \"./index-wxu-PlLx.mjs\";\nconst useTextareaResize = (input, {\n  maxRows,\n  noAutoShrink,\n  rows\n}) => {\n  const height = ref(0);\n  const maxRowsNumber = useToNumber(\n    computed(() => toValue(maxRows) || Number.NaN),\n    {\n      method: \"parseInt\",\n      nanToZero: true\n    }\n  );\n  const rowsNumber = useToNumber(rows, {\n    method: \"parseInt\",\n    nanToZero: true\n  });\n  const computedMinRows = computed(() => Math.max(rowsNumber.value || 2, 2));\n  const computedMaxRows = computed(() => Math.max(computedMinRows.value, maxRowsNumber.value || 0));\n  const computedRows = computed(\n    () => computedMinRows.value === computedMaxRows.value ? computedMinRows.value : null\n  );\n  const handleHeightChange = async () => {\n    if (!input.value || !isVisible(input.value)) {\n      height.value = null;\n      return;\n    }\n    const computedStyle = getComputedStyle(input.value);\n    const lineHeight = Number.parseFloat(computedStyle.lineHeight) || 1;\n    const border = (Number.parseFloat(computedStyle.borderTopWidth) || 0) + (Number.parseFloat(computedStyle.borderBottomWidth) || 0);\n    const padding = (Number.parseFloat(computedStyle.paddingTop) || 0) + (Number.parseFloat(computedStyle.paddingBottom) || 0);\n    const offset = border + padding;\n    const minHeight = lineHeight * computedMinRows.value + offset;\n    const oldHeight = input.value.style.height || computedStyle.height;\n    height.value = \"auto\";\n    await nextTick();\n    const { scrollHeight } = input.value;\n    height.value = oldHeight;\n    await nextTick();\n    const contentRows = Math.max((scrollHeight - padding) / lineHeight, 2);\n    const rows2 = Math.min(Math.max(contentRows, computedMinRows.value), computedMaxRows.value);\n    const newHeight = Math.max(Math.ceil(rows2 * lineHeight + offset), minHeight);\n    if (toValue(noAutoShrink) && (Number.parseFloat(oldHeight.toString()) || 0) > newHeight) {\n      height.value = oldHeight;\n      return;\n    }\n    height.value = `${newHeight}px`;\n  };\n  onMounted(handleHeightChange);\n  const computedStyles = computed(() => ({\n    resize: \"none\",\n    height: typeof height.value === \"string\" ? height.value : height.value ? `${height.value}px` : void 0\n  }));\n  return {\n    onInput: handleHeightChange,\n    computedStyles,\n    computedRows\n  };\n};\nconst _hoisted_1 = [\"id\", \"name\", \"form\", \"value\", \"disabled\", \"placeholder\", \"required\", \"autocomplete\", \"readonly\", \"aria-required\", \"aria-invalid\", \"rows\", \"wrap\"];\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  __name: \"BFormTextarea\",\n  props: /* @__PURE__ */ mergeModels({\n    noResize: { type: Boolean, default: false },\n    rows: { default: 2 },\n    wrap: { default: \"soft\" },\n    noAutoShrink: { type: Boolean, default: false },\n    maxRows: { default: void 0 },\n    ariaInvalid: { type: [Boolean, String], default: void 0 },\n    autocomplete: { default: void 0 },\n    autofocus: { type: Boolean, default: false },\n    disabled: { type: Boolean, default: false },\n    form: { default: void 0 },\n    formatter: { type: Function, default: void 0 },\n    id: { default: void 0 },\n    lazyFormatter: { type: Boolean, default: false },\n    list: { default: void 0 },\n    name: { default: void 0 },\n    placeholder: { default: void 0 },\n    plaintext: { type: Boolean, default: false },\n    readonly: { type: Boolean, default: false },\n    required: { type: Boolean, default: false },\n    size: { default: void 0 },\n    state: { type: [Boolean, null], default: void 0 },\n    debounce: { default: 0 },\n    debounceMaxWait: { default: Number.NaN }\n  }, {\n    \"modelValue\": {\n      default: \"\"\n    },\n    \"modelModifiers\": {}\n  }),\n  emits: [\"update:modelValue\"],\n  setup(__props, { expose: __expose }) {\n    const _props = __props;\n    const props = useDefaults(_props, \"BFormTextarea\");\n    const [modelValue, modelModifiers] = useModel(__props, \"modelValue\", {\n      set: (v) => normalizeInput(v, modelModifiers)\n    });\n    const input = useTemplateRef(\"_input\");\n    const {\n      computedId,\n      forceUpdateKey,\n      computedAriaInvalid,\n      onInput,\n      stateClass,\n      onChange,\n      onBlur,\n      focus,\n      blur\n    } = useFormInput(props, input, modelValue, modelModifiers);\n    const computedClasses = computed(() => [\n      stateClass.value,\n      props.plaintext ? \"form-control-plaintext\" : \"form-control\",\n      {\n        [`form-control-${props.size}`]: !!props.size\n      }\n    ]);\n    const {\n      computedStyles: resizeStyles,\n      onInput: handleHeightChange,\n      computedRows\n    } = useTextareaResize(input, {\n      maxRows: () => props.maxRows,\n      rows: () => props.rows,\n      noAutoShrink: () => props.noAutoShrink\n    });\n    const computedStyles = computed(() => ({\n      resize: props.noResize ? \"none\" : void 0,\n      ...props.maxRows || props.noAutoShrink ? resizeStyles.value : void 0\n    }));\n    __expose({\n      blur,\n      element: input,\n      focus\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"textarea\", {\n        id: unref(computedId),\n        ref: \"_input\",\n        key: unref(forceUpdateKey),\n        class: normalizeClass(computedClasses.value),\n        name: unref(props).name || void 0,\n        form: unref(props).form || void 0,\n        value: unref(modelValue) ?? void 0,\n        disabled: unref(props).disabled,\n        placeholder: unref(props).placeholder,\n        required: unref(props).required || void 0,\n        autocomplete: unref(props).autocomplete || void 0,\n        readonly: unref(props).readonly || unref(props).plaintext,\n        \"aria-required\": unref(props).required || void 0,\n        \"aria-invalid\": unref(computedAriaInvalid),\n        rows: unref(computedRows) || 2,\n        style: normalizeStyle(computedStyles.value),\n        wrap: unref(props).wrap || void 0,\n        onInput: _cache[0] || (_cache[0] = (e) => {\n          unref(onInput)(e);\n          unref(handleHeightChange)();\n        }),\n        onChange: _cache[1] || (_cache[1] = //@ts-ignore\n        (...args) => unref(onChange) && unref(onChange)(...args)),\n        onBlur: _cache[2] || (_cache[2] = //@ts-ignore\n        (...args) => unref(onBlur) && unref(onBlur)(...args))\n      }, null, 46, _hoisted_1);\n    };\n  }\n});\nexport {\n  _sfc_main as _\n};\n//# sourceMappingURL=BFormTextarea.vue_vue_type_script_setup_true_lang-os9418J-.mjs.map\n","<script setup lang=\"ts\">\r\nimport { inject } from 'vue';\r\nimport { QuestionDefine } from '~melo/types';\r\n\r\nconst questionDefines = inject<Record<string, QuestionDefine>>('question.defines');\r\n\r\nconst emit = defineEmits<{\r\n  selected: [type: string];\r\n}>();\r\n\r\nfunction select(type: string) {\r\n  emit('selected', type);\r\n}\r\n\r\n</script>\r\n\r\n<template>\r\n  <div class=\"row row-cols-2 gy-3\">\r\n    <div v-for=\"(define, key) in questionDefines\" :key=\"define.id\" class=\"col\">\r\n      <div class=\"c-question-button card border h-100\">\r\n        <div class=\"card-body d-flex flex-column gap-3\">\r\n          <div class=\"d-flex align-items-center gap-2\">\r\n            <i :class=\"define.icon\" style=\"font-size: 2rem;\"></i>\r\n            <a href=\"#\" class=\"link-dark text-decoration-none stretched-link\"\r\n              @click.prevent=\"select(key)\">\r\n              <h3 class=\"m-0\">\r\n                {{ define.title }}\r\n              </h3>\r\n            </a>\r\n          </div>\r\n          <div class=\"text-muted small\">{{ define.description }}</div>\r\n          <div class=\"mt-auto\">\r\n            <button type=\"button\" class=\"btn btn-outline-primary btn-sm\">\r\n              按此選擇\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n.c-question-button {\r\n  transition: all .3s;\r\n\r\n  &:hover {\r\n    background-color: var(--bs-primary-bg-subtle);\r\n  }\r\n}\r\n</style>\r\n","<script setup lang=\"ts\">\r\nimport { inject } from 'vue';\r\nimport { QuestionDefine } from '~melo/types';\r\n\r\nconst questionDefines = inject<Record<string, QuestionDefine>>('question.defines');\r\n\r\nconst emit = defineEmits<{\r\n  selected: [type: string];\r\n}>();\r\n\r\nfunction select(type: string) {\r\n  emit('selected', type);\r\n}\r\n\r\n</script>\r\n\r\n<template>\r\n  <div class=\"row row-cols-2 gy-3\">\r\n    <div v-for=\"(define, key) in questionDefines\" :key=\"define.id\" class=\"col\">\r\n      <div class=\"c-question-button card border h-100\">\r\n        <div class=\"card-body d-flex flex-column gap-3\">\r\n          <div class=\"d-flex align-items-center gap-2\">\r\n            <i :class=\"define.icon\" style=\"font-size: 2rem;\"></i>\r\n            <a href=\"#\" class=\"link-dark text-decoration-none stretched-link\"\r\n              @click.prevent=\"select(key)\">\r\n              <h3 class=\"m-0\">\r\n                {{ define.title }}\r\n              </h3>\r\n            </a>\r\n          </div>\r\n          <div class=\"text-muted small\">{{ define.description }}</div>\r\n          <div class=\"mt-auto\">\r\n            <button type=\"button\" class=\"btn btn-outline-primary btn-sm\">\r\n              按此選擇\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n.c-question-button {\r\n  transition: all .3s;\r\n\r\n  &:hover {\r\n    background-color: var(--bs-primary-bg-subtle);\r\n  }\r\n}\r\n</style>\r\n","import { useLoading } from '@lyrasoft/ts-toolkit/vue';\r\nimport { ApiReturn, route, useHttpClient } from '@windwalker-io/unicorn-next';\r\nimport { MeloOption, Question } from '~melo/types';\r\n\r\nexport function useQuestionController() {\r\n  async function getQuestions(quizId: number) {\r\n    const { get } = await useHttpClient();\r\n\r\n    const res = await get<ApiReturn<Question[]>>(\r\n      route('@ajax_question/prepare'),\r\n      {\r\n        params: {\r\n          segmentId: quizId\r\n        }\r\n      }\r\n    );\r\n\r\n    return res.data.data;\r\n  }\r\n\r\n  async function save(data: any, isNew: number = 0) {\r\n    const { post } = await useHttpClient();\r\n\r\n    const res = await post<ApiReturn<Question>>(\r\n      route('@ajax_question/save'),\r\n      {\r\n        data: data,\r\n        isNew: isNew\r\n      }\r\n    );\r\n\r\n    return res.data.data;\r\n  }\r\n\r\n  async function reorder(orders: Record<number, number>) {\r\n    const { post } = await useHttpClient();\r\n\r\n    return await post(\r\n      route('@ajax_question/reorder'),\r\n      {\r\n        orders: orders,\r\n      }\r\n    );\r\n  }\r\n\r\n  async function remove(id: number) {\r\n    const { post } = await useHttpClient();\r\n\r\n    await post(\r\n      route('@ajax_question/delete'),\r\n      {\r\n        id\r\n      }\r\n    );\r\n  }\r\n\r\n  function createEmptyQuestion(lessonId: number, segmentId: number): Partial<Question> {\r\n    return {\r\n      lessonId,\r\n      segmentId,\r\n      type: 'select',\r\n      is_multiple: '0',\r\n      title: '',\r\n      content: '',\r\n      image: '',\r\n      score: 0,\r\n      state: 1,\r\n      ordering: 0,\r\n    };\r\n  }\r\n\r\n  return {\r\n    getQuestions,\r\n    save,\r\n    reorder,\r\n    remove,\r\n    createEmptyQuestion,\r\n  };\r\n}\r\n\r\n","import { inject } from 'vue';\r\nimport { QuestionDefine } from '~melo/types';\r\n\r\nexport function useQuestionPresenter() {\r\n  const defines = inject<Record<string, QuestionDefine>>('question.defines');\r\n\r\n  function getDefines() {\r\n    return defines || {};\r\n  }\r\n\r\n  function typeToTitle(type: string) {\r\n    return defines?.[type]?.title || type;\r\n  }\r\n\r\n  function typeToDescription(type: string) {\r\n    return defines?.[type]?.description || '';\r\n  }\r\n\r\n  function typeToIcon(type: string) {\r\n    return defines?.[type]?.icon || 'fas fa-question-circle';\r\n  }\r\n\r\n  function scoreLimit(score: number) {\r\n    if (score > 100) {\r\n      return 100;\r\n    }\r\n\r\n    if (score < 1) {\r\n      return 1;\r\n    }\r\n\r\n    return score;\r\n  }\r\n\r\n  return {\r\n    getDefines,\r\n    typeToTitle,\r\n    typeToDescription,\r\n    typeToIcon,\r\n    scoreLimit,\r\n  };\r\n}\r\n\r\n","<script setup lang=\"ts\">\r\nimport { useDebounceFn } from '@vueuse/core';\r\nimport { deleteConfirm } from '@windwalker-io/unicorn-next';\r\nimport { toRefs } from 'vue';\r\nimport { useQuestionController } from '~melo/features/question/useQuestionController';\r\nimport { useQuestionPresenter } from '~melo/features/question/useQuestionPresenter';\r\nimport { Question } from '~melo/types';\r\n\r\nconst props = defineProps<{\r\n  item: Question;\r\n  index: number;\r\n}>();\r\n\r\nconst emit = defineEmits<{\r\n  'edit': [item: Question];\r\n  'delete': [itemId: number];\r\n  'save': [item: Question];\r\n  'saving': [];\r\n  'saved': [];\r\n}>();\r\n\r\nconst { save, remove } = useQuestionController();\r\nconst { typeToTitle, scoreLimit } = useQuestionPresenter();\r\n\r\nconst { item } = toRefs(props);\r\n\r\nfunction editQuestion() {\r\n  emit('edit', item.value);\r\n}\r\n\r\nasync function deleteQuestion() {\r\n  const v = await deleteConfirm(\r\n    \"確定要刪除這個問題嗎？\",\r\n    '',\r\n  );\r\n\r\n  if (v) {\r\n    await remove(item.value.id!);\r\n\r\n    emit('delete', item.value.id!);\r\n  }\r\n}\r\n\r\nconst changeScore = useDebounceFn(async () => {\r\n  item.value.score = scoreLimit(item.value.score);\r\n\r\n  emit('saving');\r\n\r\n  await save(item.value, 0);\r\n\r\n  emit('saved');\r\n}, 300);\r\n</script>\r\n\r\n<template>\r\n  <div class=\"c-question-item-outside\" :data-qn-id=\"item.id\">\r\n    <!-- Bar -->\r\n    <div class=\"c-question-item card border\">\r\n      <div class=\"c-question-item__content card-body p-1 d-flex align-items-center gap-2\" style=\"min-width: 1px\">\r\n        <div class=\"c-question-item__handle handle px-2\"\r\n          style=\"cursor: move; z-index: 3;\">\r\n          <span class=\"fal fa-bars\"></span>\r\n        </div>\r\n\r\n        <div class=\"text-nowrap text-muted\" style=\"min-width: 2em;\">\r\n          {{ props.index + 1 }}.\r\n        </div>\r\n\r\n        <div class=\"text-nowrap me-3\">\r\n          {{ typeToTitle(item.type) }}\r\n        </div>\r\n\r\n        <a href=\"#\" class=\"c-question-item__title text-truncate text-decoration-none\"\r\n          @click.prevent=\"editQuestion\">\r\n          {{ item.content || '題目內容未填寫' }}\r\n        </a>\r\n\r\n        <div class=\"d-flex align-items-center gap-3 text-nowrap ms-auto\">\r\n          <div class=\"text-nowrap me-1 d-flex align-items-center\">\r\n            <div class=\"me-1\">\r\n              分數\r\n            </div>\r\n            <div>\r\n              <input v-model=\"item.score\" type=\"number\" id=\"input-score\"\r\n                class=\"form-control form-control-sm\"\r\n                style=\"width: 5em;\"\r\n                @input=\"changeScore\" />\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"c-question-item__delete\">\r\n            <a href=\"javascript://\" class=\"link-danger\" @click=\"deleteQuestion\">\r\n              <i class=\"fal fa-trash\"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>\r\n","<script setup lang=\"ts\">\r\nimport { useDebounceFn } from '@vueuse/core';\r\nimport { deleteConfirm } from '@windwalker-io/unicorn-next';\r\nimport { toRefs } from 'vue';\r\nimport { useQuestionController } from '~melo/features/question/useQuestionController';\r\nimport { useQuestionPresenter } from '~melo/features/question/useQuestionPresenter';\r\nimport { Question } from '~melo/types';\r\n\r\nconst props = defineProps<{\r\n  item: Question;\r\n  index: number;\r\n}>();\r\n\r\nconst emit = defineEmits<{\r\n  'edit': [item: Question];\r\n  'delete': [itemId: number];\r\n  'save': [item: Question];\r\n  'saving': [];\r\n  'saved': [];\r\n}>();\r\n\r\nconst { save, remove } = useQuestionController();\r\nconst { typeToTitle, scoreLimit } = useQuestionPresenter();\r\n\r\nconst { item } = toRefs(props);\r\n\r\nfunction editQuestion() {\r\n  emit('edit', item.value);\r\n}\r\n\r\nasync function deleteQuestion() {\r\n  const v = await deleteConfirm(\r\n    \"確定要刪除這個問題嗎？\",\r\n    '',\r\n  );\r\n\r\n  if (v) {\r\n    await remove(item.value.id!);\r\n\r\n    emit('delete', item.value.id!);\r\n  }\r\n}\r\n\r\nconst changeScore = useDebounceFn(async () => {\r\n  item.value.score = scoreLimit(item.value.score);\r\n\r\n  emit('saving');\r\n\r\n  await save(item.value, 0);\r\n\r\n  emit('saved');\r\n}, 300);\r\n</script>\r\n\r\n<template>\r\n  <div class=\"c-question-item-outside\" :data-qn-id=\"item.id\">\r\n    <!-- Bar -->\r\n    <div class=\"c-question-item card border\">\r\n      <div class=\"c-question-item__content card-body p-1 d-flex align-items-center gap-2\" style=\"min-width: 1px\">\r\n        <div class=\"c-question-item__handle handle px-2\"\r\n          style=\"cursor: move; z-index: 3;\">\r\n          <span class=\"fal fa-bars\"></span>\r\n        </div>\r\n\r\n        <div class=\"text-nowrap text-muted\" style=\"min-width: 2em;\">\r\n          {{ props.index + 1 }}.\r\n        </div>\r\n\r\n        <div class=\"text-nowrap me-3\">\r\n          {{ typeToTitle(item.type) }}\r\n        </div>\r\n\r\n        <a href=\"#\" class=\"c-question-item__title text-truncate text-decoration-none\"\r\n          @click.prevent=\"editQuestion\">\r\n          {{ item.content || '題目內容未填寫' }}\r\n        </a>\r\n\r\n        <div class=\"d-flex align-items-center gap-3 text-nowrap ms-auto\">\r\n          <div class=\"text-nowrap me-1 d-flex align-items-center\">\r\n            <div class=\"me-1\">\r\n              分數\r\n            </div>\r\n            <div>\r\n              <input v-model=\"item.score\" type=\"number\" id=\"input-score\"\r\n                class=\"form-control form-control-sm\"\r\n                style=\"width: 5em;\"\r\n                @input=\"changeScore\" />\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"c-question-item__delete\">\r\n            <a href=\"javascript://\" class=\"link-danger\" @click=\"deleteQuestion\">\r\n              <i class=\"fal fa-trash\"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>\r\n","<script setup lang=\"ts\">\r\nimport { useDebounceFn } from '@vueuse/core';\r\nimport { BFormCheckbox, BFormTextarea, vBTooltip } from 'bootstrap-vue-next';\r\nimport { toRefs, watch } from 'vue';\r\nimport { MeloOption } from '~melo/types';\r\n\r\nconst props = defineProps<{\r\n  item: MeloOption;\r\n  index: number;\r\n}>();\r\n\r\nconst emit = defineEmits<{\r\n  'delete': [optionId: number];\r\n  'save': [option: MeloOption];\r\n  'setAnswer': [index: number, isAnswer: boolean];\r\n}>();\r\n\r\nconst { item } = toRefs(props);\r\n\r\nfunction deleteOption() {\r\n  emit('delete', item.value.id!);\r\n}\r\n\r\nconst save = useDebounceFn(() => {\r\n  emit('save', item.value);\r\n}, 300);\r\n\r\nwatch(item, () => {\r\n  save();\r\n}, { deep: true });\r\n\r\nfunction setIsAnswer() {\r\n  emit('setAnswer', props.index, item.value.isAnswer);\r\n}\r\n\r\n\r\n</script>\r\n\r\n<template>\r\n  <div class=\"c-option-outside\" :data-option-id=\"item.id\">\r\n    <!-- Bar -->\r\n    <div class=\"c-option-item card border\" style=\"min-width: 1px;\">\r\n      <div class=\"card-body d-flex align-items-center gap-3\">\r\n        <div class=\"c-option-item__handle handle\" style=\"cursor: move; z-index: 3;\">\r\n          <span class=\"fal fa-bars\"></span>\r\n        </div>\r\n\r\n        <div class=\"text-nowrap flex-grow-1\">\r\n          <BFormTextarea\r\n            v-model=\"item.title\"\r\n            placeholder=\"輸入選項內容\"\r\n            rows=\"2\"\r\n          />\r\n        </div>\r\n\r\n        <div class=\"d-flex align-items-center gap-3\">\r\n          <div class=\"text-nowrap me-1 d-flex align-items-center\">\r\n            <BFormCheckbox v-model=\"item.isAnswer\" @change=\"setIsAnswer\" switch\r\n              class=\"m-0\">\r\n              正確答案\r\n            </BFormCheckbox>\r\n          </div>\r\n\r\n          <div class=\"c-option-item__delete\">\r\n            <a href=\"javascript://\" class=\"link-danger\" @click=\"deleteOption\"\r\n              v-b-tooltip=\"'刪除此選項'\"\r\n            >\r\n              <i class=\"fal fa-trash\"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n</style>\r\n","<script setup lang=\"ts\">\r\nimport { useDebounceFn } from '@vueuse/core';\r\nimport { BFormCheckbox, BFormTextarea, vBTooltip } from 'bootstrap-vue-next';\r\nimport { toRefs, watch } from 'vue';\r\nimport { MeloOption } from '~melo/types';\r\n\r\nconst props = defineProps<{\r\n  item: MeloOption;\r\n  index: number;\r\n}>();\r\n\r\nconst emit = defineEmits<{\r\n  'delete': [optionId: number];\r\n  'save': [option: MeloOption];\r\n  'setAnswer': [index: number, isAnswer: boolean];\r\n}>();\r\n\r\nconst { item } = toRefs(props);\r\n\r\nfunction deleteOption() {\r\n  emit('delete', item.value.id!);\r\n}\r\n\r\nconst save = useDebounceFn(() => {\r\n  emit('save', item.value);\r\n}, 300);\r\n\r\nwatch(item, () => {\r\n  save();\r\n}, { deep: true });\r\n\r\nfunction setIsAnswer() {\r\n  emit('setAnswer', props.index, item.value.isAnswer);\r\n}\r\n\r\n\r\n</script>\r\n\r\n<template>\r\n  <div class=\"c-option-outside\" :data-option-id=\"item.id\">\r\n    <!-- Bar -->\r\n    <div class=\"c-option-item card border\" style=\"min-width: 1px;\">\r\n      <div class=\"card-body d-flex align-items-center gap-3\">\r\n        <div class=\"c-option-item__handle handle\" style=\"cursor: move; z-index: 3;\">\r\n          <span class=\"fal fa-bars\"></span>\r\n        </div>\r\n\r\n        <div class=\"text-nowrap flex-grow-1\">\r\n          <BFormTextarea\r\n            v-model=\"item.title\"\r\n            placeholder=\"輸入選項內容\"\r\n            rows=\"2\"\r\n          />\r\n        </div>\r\n\r\n        <div class=\"d-flex align-items-center gap-3\">\r\n          <div class=\"text-nowrap me-1 d-flex align-items-center\">\r\n            <BFormCheckbox v-model=\"item.isAnswer\" @change=\"setIsAnswer\" switch\r\n              class=\"m-0\">\r\n              正確答案\r\n            </BFormCheckbox>\r\n          </div>\r\n\r\n          <div class=\"c-option-item__delete\">\r\n            <a href=\"javascript://\" class=\"link-danger\" @click=\"deleteOption\"\r\n              v-b-tooltip=\"'刪除此選項'\"\r\n            >\r\n              <i class=\"fal fa-trash\"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n</style>\r\n","import { ApiReturn, route, useHttpClient } from '@windwalker-io/unicorn-next';\r\nimport { MeloOption } from '~melo/types';\r\n\r\nexport function useOptionController() {\r\n  async function getOptions(questionId: number) {\r\n    const { get } = await useHttpClient();\r\n\r\n    const res = await get(\r\n      route('@ajax_option/prepare'),\r\n      {\r\n        params: {\r\n          questionId\r\n        }\r\n      }\r\n    );\r\n\r\n    return res.data.data\r\n  }\r\n\r\n  async function reorder(orders: Record<number, number> = {}) {\r\n    const { post } = await useHttpClient();\r\n\r\n    await post(\r\n      route('@ajax_option/reorder'),\r\n      {\r\n        orders,\r\n      }\r\n    );\r\n  }\r\n\r\n  function createEmptyOption(questionId: number): Partial<MeloOption> {\r\n    return {\r\n      questionId,\r\n      title: '',\r\n      isAnswer: false,\r\n      state: 1,\r\n      ordering: 0,\r\n    };\r\n  }\r\n\r\n  async function save(\r\n    data: Partial<MeloOption>,\r\n    isNew: number = 0\r\n  ) {\r\n    const { post } = await useHttpClient();\r\n\r\n    const res = await post<ApiReturn<MeloOption>>(\r\n      route('@ajax_option/save'),\r\n      {\r\n        data,\r\n        isNew,\r\n      }\r\n    );\r\n\r\n    return res.data.data;\r\n  }\r\n\r\n  async function saveMultiple(\r\n    options: Partial<MeloOption>,\r\n  ) {\r\n    const { post } = await useHttpClient();\r\n\r\n    const res = await post<ApiReturn<MeloOption[]>>(\r\n      route('@ajax_option/saveMultiple'),\r\n      {\r\n        options,\r\n      }\r\n    );\r\n\r\n    return res.data.data;\r\n  }\r\n\r\n  async function deleteOption(id: number) {\r\n    const { post } = await useHttpClient();\r\n\r\n    await post(\r\n      route('delete_option'),\r\n      {\r\n        id: id\r\n      }\r\n    );\r\n  }\r\n\r\n  return {\r\n    getOptions,\r\n    reorder,\r\n    createEmptyOption,\r\n    save,\r\n    saveMultiple,\r\n    deleteOption,\r\n  };\r\n}\r\n\r\n","<script setup lang=\"ts\">\r\nimport { deleteConfirm } from '@windwalker-io/unicorn-next';\r\nimport { BButton } from 'bootstrap-vue-next';\r\nimport { onMounted } from 'vue';\r\nimport { VueDraggable } from 'vue-draggable-plus';\r\nimport OptionEdit from '~melo/components/segment-edit/question/OptionEdit.vue';\r\nimport { useOptionController } from '~melo/features/question/useOptionController';\r\nimport { sleepMax } from '~melo/shared/timing';\r\nimport { MeloOption, Question } from '~melo/types';\r\n\r\nconst props = defineProps<{\r\n  question: Question;\r\n}>();\r\n\r\nconst emit = defineEmits<{\r\n  saving: [];\r\n  saved: [];\r\n}>();\r\n\r\nconst options = defineModel<MeloOption[]>({\r\n  default: () => []\r\n});\r\n\r\nconst {\r\n  save: saveOption,\r\n  reorder: reorderOptions,\r\n  deleteOption: remove,\r\n  getOptions, createEmptyOption,\r\n  saveMultiple,\r\n} = useOptionController();\r\n\r\nonMounted(() => {\r\n  prepareOptions();\r\n});\r\n\r\nasync function prepareOptions() {\r\n  options.value = await getOptions(props.question.id!);\r\n}\r\n\r\nasync function reorder() {\r\n  autoSave = false;\r\n\r\n  const orders: Record<number, number> = {};\r\n\r\n  options.value.forEach((item, i) => {\r\n    orders[item.id!] = i + 1;\r\n  });\r\n\r\n  await reorderOptions(orders);\r\n\r\n  autoSave = true;\r\n}\r\n\r\nasync function createOption() {\r\n  const option = createEmptyOption(props.question.id!);\r\n  option.ordering = options.value.length + 1;\r\n\r\n  const newItem = await saveOption(option, 1);\r\n\r\n  options.value.push(newItem);\r\n}\r\n\r\n// Save\r\nlet autoSave = true;\r\n\r\nasync function autoSaveOption(option: MeloOption) {\r\n  if (!autoSave) {\r\n    return;\r\n  }\r\n\r\n  const start = Date.now();\r\n  emit('saving');\r\n\r\n  try {\r\n    await saveOption(option, 0);\r\n  } finally {\r\n    await sleepMax(start, 500);\r\n\r\n    emit('saved');\r\n  }\r\n}\r\n\r\nasync function deleteOption(id: number) {\r\n  const v = await deleteConfirm(\"確定要刪除這個選項嗎？\");\r\n\r\n  if (v) {\r\n    options.value = options.value.filter(item => item.id !== id);\r\n\r\n    await remove(id);\r\n  }\r\n}\r\n\r\nasync function setAnswer(index: number, currentAnswer: boolean) {\r\n  autoSave = false;\r\n\r\n  if (props.question.type === 'select') {\r\n    options.value.forEach((item: MeloOption) => {\r\n      item.isAnswer = false;\r\n    });\r\n\r\n    options.value[index].isAnswer = true;\r\n  }\r\n\r\n  if (props.question.type === 'multiple') {\r\n    options.value[index].isAnswer = currentAnswer;\r\n  }\r\n\r\n  const answers: Record<number, boolean> = {};\r\n\r\n  for (const option of options.value) {\r\n    answers[option.id!] = option.isAnswer;\r\n  }\r\n\r\n  const start = Date.now();\r\n\r\n  emit('saving');\r\n\r\n  try {\r\n    await saveMultiple(options.value);\r\n  } finally {\r\n    autoSave = true;\r\n  }\r\n\r\n  await sleepMax(start, 500);\r\n\r\n  emit('saved');\r\n\r\n  // if (currentAnswer === options.value[index].isAnswer) {\r\n  //   const { post } = await useHttpClient();\r\n  //\r\n  //   await post(\r\n  //     route('save_options'),\r\n  //     {\r\n  //       data: options.value,\r\n  //     }\r\n  //   );\r\n  // }\r\n}\r\n</script>\r\n\r\n<template>\r\n  <VueDraggable\r\n    v-model=\"options\"\r\n    item-key=\"uid\"\r\n    handle=\".handle\"\r\n    class=\"d-flex flex-column gap-2\"\r\n    :on-update=\"reorder\"\r\n  >\r\n    <TransitionGroup name=\"fade\">\r\n      <OptionEdit\r\n        v-for=\"(element, index) in options\"\r\n        style=\"animation-duration: 300ms;\"\r\n        :item=\"element\"\r\n        :key=\"element.id\"\r\n        :index=\"index\"\r\n        @save=\"autoSaveOption\"\r\n        @delete=\"deleteOption\"\r\n        @setAnswer=\"setAnswer\"\r\n      ></OptionEdit>\r\n    </TransitionGroup>\r\n  </VueDraggable>\r\n\r\n  <div class=\"text-center mb-2 mt-3\">\r\n    <BButton @click=\"createOption\" variant=\"primary\" size=\"sm\">\r\n      <i class=\"fas fa-plus\"></i>\r\n      新增選項\r\n    </BButton>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","<script setup lang=\"ts\">\r\nimport { deleteConfirm } from '@windwalker-io/unicorn-next';\r\nimport { BButton } from 'bootstrap-vue-next';\r\nimport { onMounted } from 'vue';\r\nimport { VueDraggable } from 'vue-draggable-plus';\r\nimport OptionEdit from '~melo/components/segment-edit/question/OptionEdit.vue';\r\nimport { useOptionController } from '~melo/features/question/useOptionController';\r\nimport { sleepMax } from '~melo/shared/timing';\r\nimport { MeloOption, Question } from '~melo/types';\r\n\r\nconst props = defineProps<{\r\n  question: Question;\r\n}>();\r\n\r\nconst emit = defineEmits<{\r\n  saving: [];\r\n  saved: [];\r\n}>();\r\n\r\nconst options = defineModel<MeloOption[]>({\r\n  default: () => []\r\n});\r\n\r\nconst {\r\n  save: saveOption,\r\n  reorder: reorderOptions,\r\n  deleteOption: remove,\r\n  getOptions, createEmptyOption,\r\n  saveMultiple,\r\n} = useOptionController();\r\n\r\nonMounted(() => {\r\n  prepareOptions();\r\n});\r\n\r\nasync function prepareOptions() {\r\n  options.value = await getOptions(props.question.id!);\r\n}\r\n\r\nasync function reorder() {\r\n  autoSave = false;\r\n\r\n  const orders: Record<number, number> = {};\r\n\r\n  options.value.forEach((item, i) => {\r\n    orders[item.id!] = i + 1;\r\n  });\r\n\r\n  await reorderOptions(orders);\r\n\r\n  autoSave = true;\r\n}\r\n\r\nasync function createOption() {\r\n  const option = createEmptyOption(props.question.id!);\r\n  option.ordering = options.value.length + 1;\r\n\r\n  const newItem = await saveOption(option, 1);\r\n\r\n  options.value.push(newItem);\r\n}\r\n\r\n// Save\r\nlet autoSave = true;\r\n\r\nasync function autoSaveOption(option: MeloOption) {\r\n  if (!autoSave) {\r\n    return;\r\n  }\r\n\r\n  const start = Date.now();\r\n  emit('saving');\r\n\r\n  try {\r\n    await saveOption(option, 0);\r\n  } finally {\r\n    await sleepMax(start, 500);\r\n\r\n    emit('saved');\r\n  }\r\n}\r\n\r\nasync function deleteOption(id: number) {\r\n  const v = await deleteConfirm(\"確定要刪除這個選項嗎？\");\r\n\r\n  if (v) {\r\n    options.value = options.value.filter(item => item.id !== id);\r\n\r\n    await remove(id);\r\n  }\r\n}\r\n\r\nasync function setAnswer(index: number, currentAnswer: boolean) {\r\n  autoSave = false;\r\n\r\n  if (props.question.type === 'select') {\r\n    options.value.forEach((item: MeloOption) => {\r\n      item.isAnswer = false;\r\n    });\r\n\r\n    options.value[index].isAnswer = true;\r\n  }\r\n\r\n  if (props.question.type === 'multiple') {\r\n    options.value[index].isAnswer = currentAnswer;\r\n  }\r\n\r\n  const answers: Record<number, boolean> = {};\r\n\r\n  for (const option of options.value) {\r\n    answers[option.id!] = option.isAnswer;\r\n  }\r\n\r\n  const start = Date.now();\r\n\r\n  emit('saving');\r\n\r\n  try {\r\n    await saveMultiple(options.value);\r\n  } finally {\r\n    autoSave = true;\r\n  }\r\n\r\n  await sleepMax(start, 500);\r\n\r\n  emit('saved');\r\n\r\n  // if (currentAnswer === options.value[index].isAnswer) {\r\n  //   const { post } = await useHttpClient();\r\n  //\r\n  //   await post(\r\n  //     route('save_options'),\r\n  //     {\r\n  //       data: options.value,\r\n  //     }\r\n  //   );\r\n  // }\r\n}\r\n</script>\r\n\r\n<template>\r\n  <VueDraggable\r\n    v-model=\"options\"\r\n    item-key=\"uid\"\r\n    handle=\".handle\"\r\n    class=\"d-flex flex-column gap-2\"\r\n    :on-update=\"reorder\"\r\n  >\r\n    <TransitionGroup name=\"fade\">\r\n      <OptionEdit\r\n        v-for=\"(element, index) in options\"\r\n        style=\"animation-duration: 300ms;\"\r\n        :item=\"element\"\r\n        :key=\"element.id\"\r\n        :index=\"index\"\r\n        @save=\"autoSaveOption\"\r\n        @delete=\"deleteOption\"\r\n        @setAnswer=\"setAnswer\"\r\n      ></OptionEdit>\r\n    </TransitionGroup>\r\n  </VueDraggable>\r\n\r\n  <div class=\"text-center mb-2 mt-3\">\r\n    <BButton @click=\"createOption\" variant=\"primary\" size=\"sm\">\r\n      <i class=\"fas fa-plus\"></i>\r\n      新增選項\r\n    </BButton>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","<script setup lang=\"ts\">\r\nimport { useFileDialog } from '@vueuse/core';\r\nimport { data, route } from '@windwalker-io/unicorn-next';\r\nimport { BButton, BSpinner, vBTooltip } from 'bootstrap-vue-next';\r\nimport { ref } from 'vue';\r\nimport { useFileUploader } from '~melo/features/file/useFileUploader';\r\n\r\nconst props = withDefaults(\r\n  defineProps<{\r\n    uploadUrl?: string;\r\n    dest?: string;\r\n    accept?: string | string[];\r\n  }>(),\r\n  {\r\n    accept: 'image/*',\r\n  }\r\n);\r\n\r\nconst emit = defineEmits<{\r\n  uploaded: [url: string];\r\n  clear: [];\r\n}>();\r\n\r\nconst image = defineModel<string>({\r\n  default: '',\r\n});\r\n\r\nconst { wrapClassicUpload, acceptString, checkFileType } = useFileUploader({\r\n  accept: () => props.accept\r\n});\r\nconst uploadImage = wrapClassicUpload(props.uploadUrl || route('@image_upload'));\r\n\r\nconst defaultImage = ref<string>(data('defaultImage'));\r\nconst loading = ref<boolean>(false);\r\n\r\n// file Select\r\nconst { open, reset, onChange, onCancel, files } = useFileDialog({\r\n  accept: acceptString.value,\r\n});\r\nonChange(async () => {\r\n  if (!files.value?.length) {\r\n    return;\r\n  }\r\n\r\n  upload(files.value[0]);\r\n  reset();\r\n});\r\nonCancel(reset);\r\n\r\nasync function upload(file: File) {\r\n  loading.value = true;\r\n\r\n  try {\r\n    const url = await uploadImage(file, props.dest);\r\n\r\n    image.value = url;\r\n\r\n    emit('uploaded', url);\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n}\r\n\r\nfunction clear() {\r\n  image.value = '';\r\n  reset();\r\n\r\n  emit('clear');\r\n}\r\n\r\nfunction paste(e: PointerEvent) {\r\n  console.log(e);\r\n}\r\n\r\n// Drag Drop\r\nconst dragging = ref(false);\r\n\r\nfunction onDragStart() {\r\n  dragging.value = true;\r\n}\r\n\r\nfunction onDragEnd() {\r\n  dragging.value = false;\r\n}\r\n\r\nfunction onDrop(e: DragEvent) {\r\n  console.log(e);\r\n  \r\n  dragging.value = false;\r\n\r\n  const file = e.dataTransfer?.files?.[0];\r\n\r\n  if (!file) {\r\n    return;\r\n  }\r\n\r\n  upload(file);\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div class=\"c-image-uploader-wrapper d-flex flex-column gap-2 mx-auto\"\r\n    style=\"max-width: 500px; width: 100%;\"\r\n    @dragover.prevent=\"onDragStart\"\r\n    @dragleave.prevent=\"onDragEnd\"\r\n    @drop.prevent=\"onDrop\"\r\n  >\r\n    <div class=\"c-image-uploader card border overflow-hidden position-relative \">\r\n      <div v-if=\"loading\" class=\"position-absolute d-flex justify-content-center align-items-center\"\r\n        style=\"left: 0; top: 0; right: 0; bottom: 0; background-color: rgba(255, 255, 255, 0.7); z-index: 10;\">\r\n        <BSpinner />\r\n      </div>\r\n\r\n      <template v-if=\"image\">\r\n        <a :href=\"image\" target=\"_blank\">\r\n          <div class=\"c-image-uploader__preview position-relative\"\r\n            :style=\"[ dragging ? 'opacity: .7' : '' ]\"\r\n            style=\"aspect-ratio: 16/9; background-color: black; transition: all .3s\"\r\n          >\r\n            <img class=\"position-absolute rounded\" :src=\"image || defaultImage\" alt=\"Preview\"\r\n              style=\"aspect-ratio: 16/9; top: 0;left: 0; width: 100%; height: 100%; object-fit: contain;\">\r\n          </div>\r\n        </a>\r\n      </template>\r\n\r\n      <div v-else\r\n        class=\"c-image-uploader__placeholder d-flex flex-column gap-3 justify-content-center align-items-center\"\r\n        style=\"aspect-ratio: 16/9; background-color: white; transition: all .3s\"\r\n        :style=\"[ dragging ? 'background-color: var(--bs-light)' : '' ]\"\r\n      >\r\n        <div>\r\n          <i class=\"fas fa-upload fa-2x\"></i>\r\n        </div>\r\n        <div class=\"text-muted\">\r\n          拖拉至此上傳圖片\r\n        </div>\r\n        <div>\r\n          <button type=\"button\" class=\"btn btn-primary btn-sm\"\r\n            @click=\"open()\">\r\n            <i class=\"fas fa-image\"></i>\r\n            點擊此處選擇檔案\r\n          </button>\r\n          <button type=\"button\" class=\"btn btn-outline-primary btn-sm\"\r\n            v-b-tooltip=\"'從剪貼簿貼上圖片檔案'\"\r\n            @click=\"paste\">\r\n            <i class=\"fas fa-paste\"></i>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"image\" class=\"c-image-uploader-actions d-flex align-items-center justify-content-between gap-2\">\r\n      <div class=\"d-flex align-items-center gap-2\">\r\n        <button type=\"button\" class=\"btn btn-primary btn-sm\"\r\n          @click=\"open()\">\r\n          <i class=\"fas fa-image\"></i>\r\n          更換檔案\r\n        </button>\r\n        <!-- Add div to avoid tooltip container break layout -->\r\n        <div>\r\n          <button type=\"button\" class=\"btn btn-outline-primary btn-sm\"\r\n            @click=\"paste\">\r\n            <i class=\"fas fa-paste\"></i>\r\n          </button>\r\n        </div>\r\n        <span class=\"small text-muted\">或拖拉檔案至上方</span>\r\n      </div>\r\n\r\n      <button type=\"button\" class=\"btn btn-outline-danger btn-sm\" @click=\"clear\">\r\n        <i class=\"fal fa-trash\"></i>\r\n        移除圖片\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>\r\n","<script setup lang=\"ts\">\r\nimport { useFileDialog } from '@vueuse/core';\r\nimport { data, route } from '@windwalker-io/unicorn-next';\r\nimport { BButton, BSpinner, vBTooltip } from 'bootstrap-vue-next';\r\nimport { ref } from 'vue';\r\nimport { useFileUploader } from '~melo/features/file/useFileUploader';\r\n\r\nconst props = withDefaults(\r\n  defineProps<{\r\n    uploadUrl?: string;\r\n    dest?: string;\r\n    accept?: string | string[];\r\n  }>(),\r\n  {\r\n    accept: 'image/*',\r\n  }\r\n);\r\n\r\nconst emit = defineEmits<{\r\n  uploaded: [url: string];\r\n  clear: [];\r\n}>();\r\n\r\nconst image = defineModel<string>({\r\n  default: '',\r\n});\r\n\r\nconst { wrapClassicUpload, acceptString, checkFileType } = useFileUploader({\r\n  accept: () => props.accept\r\n});\r\nconst uploadImage = wrapClassicUpload(props.uploadUrl || route('@image_upload'));\r\n\r\nconst defaultImage = ref<string>(data('defaultImage'));\r\nconst loading = ref<boolean>(false);\r\n\r\n// file Select\r\nconst { open, reset, onChange, onCancel, files } = useFileDialog({\r\n  accept: acceptString.value,\r\n});\r\nonChange(async () => {\r\n  if (!files.value?.length) {\r\n    return;\r\n  }\r\n\r\n  upload(files.value[0]);\r\n  reset();\r\n});\r\nonCancel(reset);\r\n\r\nasync function upload(file: File) {\r\n  loading.value = true;\r\n\r\n  try {\r\n    const url = await uploadImage(file, props.dest);\r\n\r\n    image.value = url;\r\n\r\n    emit('uploaded', url);\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n}\r\n\r\nfunction clear() {\r\n  image.value = '';\r\n  reset();\r\n\r\n  emit('clear');\r\n}\r\n\r\nfunction paste(e: PointerEvent) {\r\n  console.log(e);\r\n}\r\n\r\n// Drag Drop\r\nconst dragging = ref(false);\r\n\r\nfunction onDragStart() {\r\n  dragging.value = true;\r\n}\r\n\r\nfunction onDragEnd() {\r\n  dragging.value = false;\r\n}\r\n\r\nfunction onDrop(e: DragEvent) {\r\n  console.log(e);\r\n  \r\n  dragging.value = false;\r\n\r\n  const file = e.dataTransfer?.files?.[0];\r\n\r\n  if (!file) {\r\n    return;\r\n  }\r\n\r\n  upload(file);\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div class=\"c-image-uploader-wrapper d-flex flex-column gap-2 mx-auto\"\r\n    style=\"max-width: 500px; width: 100%;\"\r\n    @dragover.prevent=\"onDragStart\"\r\n    @dragleave.prevent=\"onDragEnd\"\r\n    @drop.prevent=\"onDrop\"\r\n  >\r\n    <div class=\"c-image-uploader card border overflow-hidden position-relative \">\r\n      <div v-if=\"loading\" class=\"position-absolute d-flex justify-content-center align-items-center\"\r\n        style=\"left: 0; top: 0; right: 0; bottom: 0; background-color: rgba(255, 255, 255, 0.7); z-index: 10;\">\r\n        <BSpinner />\r\n      </div>\r\n\r\n      <template v-if=\"image\">\r\n        <a :href=\"image\" target=\"_blank\">\r\n          <div class=\"c-image-uploader__preview position-relative\"\r\n            :style=\"[ dragging ? 'opacity: .7' : '' ]\"\r\n            style=\"aspect-ratio: 16/9; background-color: black; transition: all .3s\"\r\n          >\r\n            <img class=\"position-absolute rounded\" :src=\"image || defaultImage\" alt=\"Preview\"\r\n              style=\"aspect-ratio: 16/9; top: 0;left: 0; width: 100%; height: 100%; object-fit: contain;\">\r\n          </div>\r\n        </a>\r\n      </template>\r\n\r\n      <div v-else\r\n        class=\"c-image-uploader__placeholder d-flex flex-column gap-3 justify-content-center align-items-center\"\r\n        style=\"aspect-ratio: 16/9; background-color: white; transition: all .3s\"\r\n        :style=\"[ dragging ? 'background-color: var(--bs-light)' : '' ]\"\r\n      >\r\n        <div>\r\n          <i class=\"fas fa-upload fa-2x\"></i>\r\n        </div>\r\n        <div class=\"text-muted\">\r\n          拖拉至此上傳圖片\r\n        </div>\r\n        <div>\r\n          <button type=\"button\" class=\"btn btn-primary btn-sm\"\r\n            @click=\"open()\">\r\n            <i class=\"fas fa-image\"></i>\r\n            點擊此處選擇檔案\r\n          </button>\r\n          <button type=\"button\" class=\"btn btn-outline-primary btn-sm\"\r\n            v-b-tooltip=\"'從剪貼簿貼上圖片檔案'\"\r\n            @click=\"paste\">\r\n            <i class=\"fas fa-paste\"></i>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"image\" class=\"c-image-uploader-actions d-flex align-items-center justify-content-between gap-2\">\r\n      <div class=\"d-flex align-items-center gap-2\">\r\n        <button type=\"button\" class=\"btn btn-primary btn-sm\"\r\n          @click=\"open()\">\r\n          <i class=\"fas fa-image\"></i>\r\n          更換檔案\r\n        </button>\r\n        <!-- Add div to avoid tooltip container break layout -->\r\n        <div>\r\n          <button type=\"button\" class=\"btn btn-outline-primary btn-sm\"\r\n            @click=\"paste\">\r\n            <i class=\"fas fa-paste\"></i>\r\n          </button>\r\n        </div>\r\n        <span class=\"small text-muted\">或拖拉檔案至上方</span>\r\n      </div>\r\n\r\n      <button type=\"button\" class=\"btn btn-outline-danger btn-sm\" @click=\"clear\">\r\n        <i class=\"fal fa-trash\"></i>\r\n        移除圖片\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>\r\n","<script setup lang=\"ts\">\r\nimport { useCurrentElement, useDebounceFn } from '@vueuse/core';\r\nimport { sleep } from '@windwalker-io/unicorn-next';\r\nimport { BFormGroup, BFormInput, BFormRadio, BFormRadioGroup, BFormTextarea } from 'bootstrap-vue-next';\r\nimport { computed, onMounted, ref, toRefs, watch } from 'vue';\r\nimport OptionList from '~melo/components/segment-edit/question/OptionList.vue';\r\nimport { useQuestionController } from '~melo/features/question/useQuestionController';\r\nimport { useQuestionPresenter } from '~melo/features/question/useQuestionPresenter';\r\nimport { sleepMax } from '~melo/shared/timing';\r\nimport { MeloOption, Question } from '~melo/types';\r\nimport ImageUploader from '../../uploader/ImageUploader.vue';\r\n\r\nconst props = defineProps<{\r\n}>();\r\n\r\nconst question = defineModel<Question>({\r\n  required: true\r\n});\r\n\r\nconst emit = defineEmits<{\r\n  saving: [];\r\n  saved: [];\r\n}>();\r\n\r\nconst { scoreLimit } = useQuestionPresenter();\r\n\r\nconst options = ref<MeloOption[]>([]);\r\nconst hasOptions = computed(() => question.value.type === 'select' || question.value.type === 'multiple');\r\n\r\nconst el = useCurrentElement<HTMLDivElement>();\r\n\r\n// Prepare\r\nonMounted(async () => {\r\n  await sleep(300);\r\n\r\n  const input = el.value.querySelector<HTMLTextAreaElement | HTMLInputElement>('input, textarea');\r\n  input?.focus();\r\n\r\n  input?.dispatchEvent(new CustomEvent('input'))\r\n});\r\n\r\nconst changeScore = useDebounceFn(async () => {\r\n  question.value.score = scoreLimit(question.value.score);\r\n}, 300);\r\n\r\nfunction clearImage() {\r\n  question.value.image = '';\r\n}\r\n\r\n// Save\r\nconst { save } = useQuestionController();\r\nconst saving = ref(false);\r\nlet autoSave = true;\r\n\r\nwatch(question, () => {\r\n  if (autoSave) {\r\n    saveDebounced();\r\n  }\r\n}, { deep: true });\r\n\r\nconst saveDebounced = useDebounceFn(async () => {\r\n  saving.value = true;\r\n  const now = Date.now();\r\n\r\n  emit('saving');\r\n\r\n  try {\r\n    const saved = await save(question.value, 0);\r\n    question.value.id = saved.id;\r\n  } finally {\r\n    await sleepMax(now, 500);\r\n\r\n    emit('saved');\r\n    saving.value = false;\r\n  }\r\n}, 500);\r\n\r\nwatch(() => question.value.type, (type) => {\r\n  if (type === 'select') {\r\n    let hasAnswer = false;\r\n\r\n    for (const option of options.value) {\r\n      if (hasAnswer) {\r\n        option.isAnswer = false;\r\n        continue;\r\n      }\r\n\r\n      if (option.isAnswer) {\r\n        hasAnswer = true;\r\n      }\r\n    }\r\n  }\r\n}, { deep: true });\r\n\r\n// Set first answer for select question\r\nconst answersCount = computed(() => {\r\n  return options.value.filter(item => item.isAnswer).length;\r\n});\r\n\r\nwatch(() => options, () => {\r\n  if (answersCount.value === 0) {\r\n    if (\r\n      question.value.type === 'select'\r\n      && options.value.length > 0\r\n    ) {\r\n      options.value[0].isAnswer = true;\r\n    }\r\n  }\r\n}, { deep: true });\r\n</script>\r\n\r\n<template>\r\n  <div class=\"pb-5\">\r\n    <BFormGroup\r\n      label=\"題目內容\"\r\n      label-for=\"input-question-content\"\r\n      label-class=\"mb-2\"\r\n      class=\"mb-3\"\r\n    >\r\n      <BFormTextarea id=\"input-question-content\" v-model=\"question.content\"\r\n        placeholder=\"請輸入題目內容\"\r\n        rows=\"7\"\r\n        max-rows=\"15\"\r\n      />\r\n    </BFormGroup>\r\n\r\n    <!--<BFormGroup-->\r\n    <!--  label=\"題型\"-->\r\n    <!--  label-for=\"input-question-type\"-->\r\n    <!--  label-class=\"mb-2\"-->\r\n    <!--  class=\"mb-3\"-->\r\n    <!--&gt;-->\r\n    <!--  <BFormRadioGroup-->\r\n    <!--    v-model=\"question.type\"-->\r\n    <!--    button-variant=\"outline-primary\"-->\r\n    <!--    name=\"input-question-type\"-->\r\n    <!--    buttons-->\r\n    <!--    class=\"w-100\"-->\r\n    <!--  >-->\r\n    <!--    <BFormRadio value=\"boolean\">-->\r\n    <!--      <i :class=\"typeToIcon('boolean')\"></i>-->\r\n    <!--      {{ typeToTitle('boolean') }}-->\r\n    <!--    </BFormRadio>-->\r\n\r\n    <!--    <BFormRadio value=\"select\">-->\r\n    <!--      <i :class=\"typeToIcon('select')\"></i>-->\r\n    <!--      {{ typeToTitle('select') }}-->\r\n    <!--    </BFormRadio>-->\r\n\r\n    <!--    <BFormRadio value=\"multiple\">-->\r\n    <!--      <i :class=\"typeToIcon('multiple')\"></i>-->\r\n    <!--      {{ typeToTitle('multiple') }}-->\r\n    <!--    </BFormRadio>-->\r\n    <!--  </BFormRadioGroup>-->\r\n    <!--</BFormGroup>-->\r\n\r\n    <BFormGroup\r\n      label=\"圖片(選填)\"\r\n      label-for=\"input-question-type\"\r\n      label-class=\"mb-2\"\r\n      class=\"mb-3\"\r\n    >\r\n      <ImageUploader\r\n        v-model=\"question.image\"\r\n        @clear=\"clearImage\"\r\n      ></ImageUploader>\r\n    </BFormGroup>\r\n\r\n    <BFormGroup v-if=\"question.type === 'boolean'\"\r\n      label=\"答案\"\r\n      label-for=\"input-question-answer\"\r\n      label-class=\"mb-2\"\r\n      class=\"mb-3\"\r\n    >\r\n      <BFormRadioGroup\r\n        v-model=\"question.answer\"\r\n        button-variant=\"outline-primary\"\r\n        name=\"input-question-answer\"\r\n        buttons\r\n        class=\"w-100\"\r\n      >\r\n        <BFormRadio value=\"1\">\r\n          <i class=\"fas fa-check\"></i>\r\n          是\r\n        </BFormRadio>\r\n        <BFormRadio value=\"0\">\r\n          <i class=\"fas fa-xmark\"></i>\r\n          否\r\n        </BFormRadio>\r\n      </BFormRadioGroup>\r\n    </BFormGroup>\r\n\r\n    <!--<BFormGroup v-if=\"question.type === 'cloze'\"-->\r\n    <!--  label=\"答案\"-->\r\n    <!--  label-for=\"input-question-answer\"-->\r\n    <!--  label-class=\"mb-2\"-->\r\n    <!--  class=\"mb-3\"-->\r\n    <!--&gt;-->\r\n    <!--  <BFormInput-->\r\n    <!--    id=\"input-question-answer\"-->\r\n    <!--    v-model=\"question.answer\"-->\r\n    <!--    type=\"text\"-->\r\n    <!--    trim-->\r\n    <!--  />-->\r\n    <!--</BFormGroup>-->\r\n\r\n    <div class=\"c-option-list my-5 py-4\"\r\n      v-if=\"hasOptions\"\r\n    >\r\n      <h4>選項 ({{ options.length }})</h4>\r\n\r\n      <OptionList :question v-model=\"options\"\r\n        @saving=\"emit('saving')\"\r\n        @saved=\"emit('saved')\"\r\n      />\r\n    </div>\r\n\r\n    <BFormGroup\r\n      label=\"配分\"\r\n      label-for=\"input-question-score\"\r\n      description=\"限填 1~100，測驗滿分為 100\"\r\n    >\r\n      <BFormInput\r\n        id=\"input-question-score\"\r\n        v-model=\"question.score\"\r\n        type=\"number\"\r\n        max=\"100\"\r\n        min=\"1\"\r\n        @input=\"changeScore\"\r\n      />\r\n    </BFormGroup>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>\r\n","<script setup lang=\"ts\">\r\nimport { useCurrentElement, useDebounceFn } from '@vueuse/core';\r\nimport { sleep } from '@windwalker-io/unicorn-next';\r\nimport { BFormGroup, BFormInput, BFormRadio, BFormRadioGroup, BFormTextarea } from 'bootstrap-vue-next';\r\nimport { computed, onMounted, ref, toRefs, watch } from 'vue';\r\nimport OptionList from '~melo/components/segment-edit/question/OptionList.vue';\r\nimport { useQuestionController } from '~melo/features/question/useQuestionController';\r\nimport { useQuestionPresenter } from '~melo/features/question/useQuestionPresenter';\r\nimport { sleepMax } from '~melo/shared/timing';\r\nimport { MeloOption, Question } from '~melo/types';\r\nimport ImageUploader from '../../uploader/ImageUploader.vue';\r\n\r\nconst props = defineProps<{\r\n}>();\r\n\r\nconst question = defineModel<Question>({\r\n  required: true\r\n});\r\n\r\nconst emit = defineEmits<{\r\n  saving: [];\r\n  saved: [];\r\n}>();\r\n\r\nconst { scoreLimit } = useQuestionPresenter();\r\n\r\nconst options = ref<MeloOption[]>([]);\r\nconst hasOptions = computed(() => question.value.type === 'select' || question.value.type === 'multiple');\r\n\r\nconst el = useCurrentElement<HTMLDivElement>();\r\n\r\n// Prepare\r\nonMounted(async () => {\r\n  await sleep(300);\r\n\r\n  const input = el.value.querySelector<HTMLTextAreaElement | HTMLInputElement>('input, textarea');\r\n  input?.focus();\r\n\r\n  input?.dispatchEvent(new CustomEvent('input'))\r\n});\r\n\r\nconst changeScore = useDebounceFn(async () => {\r\n  question.value.score = scoreLimit(question.value.score);\r\n}, 300);\r\n\r\nfunction clearImage() {\r\n  question.value.image = '';\r\n}\r\n\r\n// Save\r\nconst { save } = useQuestionController();\r\nconst saving = ref(false);\r\nlet autoSave = true;\r\n\r\nwatch(question, () => {\r\n  if (autoSave) {\r\n    saveDebounced();\r\n  }\r\n}, { deep: true });\r\n\r\nconst saveDebounced = useDebounceFn(async () => {\r\n  saving.value = true;\r\n  const now = Date.now();\r\n\r\n  emit('saving');\r\n\r\n  try {\r\n    const saved = await save(question.value, 0);\r\n    question.value.id = saved.id;\r\n  } finally {\r\n    await sleepMax(now, 500);\r\n\r\n    emit('saved');\r\n    saving.value = false;\r\n  }\r\n}, 500);\r\n\r\nwatch(() => question.value.type, (type) => {\r\n  if (type === 'select') {\r\n    let hasAnswer = false;\r\n\r\n    for (const option of options.value) {\r\n      if (hasAnswer) {\r\n        option.isAnswer = false;\r\n        continue;\r\n      }\r\n\r\n      if (option.isAnswer) {\r\n        hasAnswer = true;\r\n      }\r\n    }\r\n  }\r\n}, { deep: true });\r\n\r\n// Set first answer for select question\r\nconst answersCount = computed(() => {\r\n  return options.value.filter(item => item.isAnswer).length;\r\n});\r\n\r\nwatch(() => options, () => {\r\n  if (answersCount.value === 0) {\r\n    if (\r\n      question.value.type === 'select'\r\n      && options.value.length > 0\r\n    ) {\r\n      options.value[0].isAnswer = true;\r\n    }\r\n  }\r\n}, { deep: true });\r\n</script>\r\n\r\n<template>\r\n  <div class=\"pb-5\">\r\n    <BFormGroup\r\n      label=\"題目內容\"\r\n      label-for=\"input-question-content\"\r\n      label-class=\"mb-2\"\r\n      class=\"mb-3\"\r\n    >\r\n      <BFormTextarea id=\"input-question-content\" v-model=\"question.content\"\r\n        placeholder=\"請輸入題目內容\"\r\n        rows=\"7\"\r\n        max-rows=\"15\"\r\n      />\r\n    </BFormGroup>\r\n\r\n    <!--<BFormGroup-->\r\n    <!--  label=\"題型\"-->\r\n    <!--  label-for=\"input-question-type\"-->\r\n    <!--  label-class=\"mb-2\"-->\r\n    <!--  class=\"mb-3\"-->\r\n    <!--&gt;-->\r\n    <!--  <BFormRadioGroup-->\r\n    <!--    v-model=\"question.type\"-->\r\n    <!--    button-variant=\"outline-primary\"-->\r\n    <!--    name=\"input-question-type\"-->\r\n    <!--    buttons-->\r\n    <!--    class=\"w-100\"-->\r\n    <!--  >-->\r\n    <!--    <BFormRadio value=\"boolean\">-->\r\n    <!--      <i :class=\"typeToIcon('boolean')\"></i>-->\r\n    <!--      {{ typeToTitle('boolean') }}-->\r\n    <!--    </BFormRadio>-->\r\n\r\n    <!--    <BFormRadio value=\"select\">-->\r\n    <!--      <i :class=\"typeToIcon('select')\"></i>-->\r\n    <!--      {{ typeToTitle('select') }}-->\r\n    <!--    </BFormRadio>-->\r\n\r\n    <!--    <BFormRadio value=\"multiple\">-->\r\n    <!--      <i :class=\"typeToIcon('multiple')\"></i>-->\r\n    <!--      {{ typeToTitle('multiple') }}-->\r\n    <!--    </BFormRadio>-->\r\n    <!--  </BFormRadioGroup>-->\r\n    <!--</BFormGroup>-->\r\n\r\n    <BFormGroup\r\n      label=\"圖片(選填)\"\r\n      label-for=\"input-question-type\"\r\n      label-class=\"mb-2\"\r\n      class=\"mb-3\"\r\n    >\r\n      <ImageUploader\r\n        v-model=\"question.image\"\r\n        @clear=\"clearImage\"\r\n      ></ImageUploader>\r\n    </BFormGroup>\r\n\r\n    <BFormGroup v-if=\"question.type === 'boolean'\"\r\n      label=\"答案\"\r\n      label-for=\"input-question-answer\"\r\n      label-class=\"mb-2\"\r\n      class=\"mb-3\"\r\n    >\r\n      <BFormRadioGroup\r\n        v-model=\"question.answer\"\r\n        button-variant=\"outline-primary\"\r\n        name=\"input-question-answer\"\r\n        buttons\r\n        class=\"w-100\"\r\n      >\r\n        <BFormRadio value=\"1\">\r\n          <i class=\"fas fa-check\"></i>\r\n          是\r\n        </BFormRadio>\r\n        <BFormRadio value=\"0\">\r\n          <i class=\"fas fa-xmark\"></i>\r\n          否\r\n        </BFormRadio>\r\n      </BFormRadioGroup>\r\n    </BFormGroup>\r\n\r\n    <!--<BFormGroup v-if=\"question.type === 'cloze'\"-->\r\n    <!--  label=\"答案\"-->\r\n    <!--  label-for=\"input-question-answer\"-->\r\n    <!--  label-class=\"mb-2\"-->\r\n    <!--  class=\"mb-3\"-->\r\n    <!--&gt;-->\r\n    <!--  <BFormInput-->\r\n    <!--    id=\"input-question-answer\"-->\r\n    <!--    v-model=\"question.answer\"-->\r\n    <!--    type=\"text\"-->\r\n    <!--    trim-->\r\n    <!--  />-->\r\n    <!--</BFormGroup>-->\r\n\r\n    <div class=\"c-option-list my-5 py-4\"\r\n      v-if=\"hasOptions\"\r\n    >\r\n      <h4>選項 ({{ options.length }})</h4>\r\n\r\n      <OptionList :question v-model=\"options\"\r\n        @saving=\"emit('saving')\"\r\n        @saved=\"emit('saved')\"\r\n      />\r\n    </div>\r\n\r\n    <BFormGroup\r\n      label=\"配分\"\r\n      label-for=\"input-question-score\"\r\n      description=\"限填 1~100，測驗滿分為 100\"\r\n    >\r\n      <BFormInput\r\n        id=\"input-question-score\"\r\n        v-model=\"question.score\"\r\n        type=\"number\"\r\n        max=\"100\"\r\n        min=\"1\"\r\n        @input=\"changeScore\"\r\n      />\r\n    </BFormGroup>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>\r\n","<script setup lang=\"ts\">\r\nimport { uniqueItemList } from '@lyrasoft/ts-toolkit/vue';\r\nimport { deleteConfirm, route, useHttpClient } from '@windwalker-io/unicorn-next';\r\nimport {\r\n  BButton,\r\n  BFormGroup,\r\n  BFormInput,\r\n  BFormRadio,\r\n  BFormRadioGroup,\r\n  BModal,\r\n  BSpinner,\r\n  useModal\r\n} from 'bootstrap-vue-next';\r\nimport { computed, inject, onMounted, ref } from 'vue';\r\nimport { VueDraggable } from 'vue-draggable-plus';\r\nimport QuestionTypeSelector from '~melo/components/segment-edit/question/QuestionTypeSelector.vue';\r\nimport { useQuestionController } from '~melo/features/question/useQuestionController';\r\nimport { useSegmentEditor } from '~melo/features/segment/useSegmentEditor';\r\nimport { Question, Segment } from '~melo/types';\r\nimport QuestionItem from '../question/QuestionItem.vue';\r\nimport QuestionEdit from '../question/QuestionEdit.vue';\r\n\r\nconst item = defineModel<Segment>({\r\n  required: true\r\n});\r\n\r\nconst questions = ref<Question[]>([]);\r\nconst loading = ref<boolean>(false);\r\n\r\nonMounted(async () => {\r\n  await prepareQuestions();\r\n});\r\n\r\nconst { saving } = useSegmentEditor();\r\nconst { getQuestions, createEmptyQuestion, save, reorder: reorderQuestions, remove } = useQuestionController();\r\n\r\nasync function prepareQuestions() {\r\n  loading.value = true;\r\n\r\n  const items = await getQuestions(item.value.id!);\r\n\r\n  questions.value = uniqueItemList(items);\r\n\r\n  loading.value = false;\r\n}\r\n\r\nasync function reorder() {\r\n  const orders: Record<number, number> = {};\r\n\r\n  questions.value.forEach((item, i) => {\r\n    orders[item.id!] = i + 1;\r\n  });\r\n\r\n  await reorderQuestions(orders);\r\n}\r\n\r\nasync function deleteQuestion(id: number) {\r\n  questions.value = questions.value.filter(item => item.id !== id);\r\n}\r\n\r\n// New Question\r\nconst questionTypeSelectorModalOpen = ref(false);\r\n\r\nfunction newQuestion() {\r\n  questionTypeSelectorModalOpen.value = true;\r\n}\r\n\r\nasync function newQuestionSelected(type: string) {\r\n  const question = createEmptyQuestion(item.value.lessonId, item.value.id!);\r\n  question.type = type;\r\n  question.ordering = questions.value.length + 1;\r\n\r\n  const newItem = await save(question, 1);\r\n\r\n  questions.value.push(newItem);\r\n\r\n  editQuestion(newItem);\r\n}\r\n\r\n// Edit Question\r\nconst questionEditModalOpen = ref(false);\r\nconst currentEditQuestion = ref<Question>();\r\nconst questionsSaving = ref(false);\r\nconst questionSaved = ref(false);\r\n\r\nfunction editQuestion(question: Question) {\r\n  currentEditQuestion.value = question;\r\n  questionEditModalOpen.value = true;\r\n  questionsSaving.value = false;\r\n  questionSaved.value = false;\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <BFormGroup\r\n      label=\"小節名稱\"\r\n      label-for=\"input-section-title\"\r\n      label-class=\"mb-2\"\r\n      class=\"mb-5\"\r\n    >\r\n      <BFormInput id=\"input-section-title\" v-model=\"item.title\" trim />\r\n    </BFormGroup>\r\n\r\n    <BFormGroup\r\n      label=\"是否可跳過此測驗閱讀下一章節？\"\r\n      label-for=\"input-section-skip\"\r\n      label-class=\"mb-2\"\r\n      class=\"mb-5\"\r\n    >\r\n      <BFormRadioGroup\r\n        v-model=\"item.canSkip\"\r\n        button-variant=\"outline-primary\"\r\n        name=\"input-section-skip\"\r\n        buttons\r\n      >\r\n        <BFormRadio :value=\"true\">可以</BFormRadio>\r\n        <BFormRadio :value=\"false\">不可以</BFormRadio>\r\n      </BFormRadioGroup>\r\n    </BFormGroup>\r\n\r\n    <div class=\"c-quiz-edit d-flex flex-column gap-4\">\r\n      <div class=\"h6 c-quiz-edit__title\">\r\n        測驗內容\r\n      </div>\r\n\r\n      <div v-if=\"loading\" class=\"text-center\">\r\n        <BSpinner />\r\n      </div>\r\n\r\n      <div v-else class=\"c-quiz-list\">\r\n        <VueDraggable\r\n          v-model=\"questions\"\r\n          class=\"d-flex flex-column gap-2\"\r\n          item-key=\"uid\"\r\n          handle=\".handle\"\r\n          :animation=\"300\"\r\n          :on-update=\"reorder\"\r\n        >\r\n          <TransitionGroup name=\"fade\">\r\n            <QuestionItem\r\n              v-for=\"(element, index) in questions\"\r\n              :item=\"element\"\r\n              :key=\"element.id\"\r\n              :index=\"index\"\r\n              @edit=\"editQuestion\"\r\n              @delete=\"deleteQuestion\"\r\n              @saving=\"saving = true\"\r\n              @saved=\"saving = false;\"\r\n              style=\"animation-duration: 300ms;\"\r\n            ></QuestionItem>\r\n          </TransitionGroup>\r\n        </VueDraggable>\r\n      </div>\r\n\r\n      <div class=\"text-center\">\r\n        <button type=\"button\" class=\"btn btn-primary btn-sm text-nowrap\"\r\n          style=\"width: 150px;\"\r\n          @click=\"newQuestion\">\r\n          <i class=\"fas fa-plus\"></i>\r\n          新增題目\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Section Edit -->\r\n    <BModal\r\n      id=\"question-edit-modal\"\r\n      title=\"題目編輯\"\r\n      v-model=\"questionEditModalOpen\"\r\n      no-footer\r\n      lazy\r\n      unmount-lazy\r\n      size=\"lg\"\r\n      bodyBgVariant=\"light\"\r\n      contentClass=\"bg-white\"\r\n    >\r\n      <template #title>\r\n        <div class=\"d-flex align-items-center gap-3\">\r\n          <div>\r\n            題目編輯\r\n          </div>\r\n\r\n          <div v-if=\"questionsSaving\" class=\"text-muted small\">\r\n            <BSpinner small type=\"border\" class=\"me-1\" />\r\n            儲存中...\r\n          </div>\r\n          <div v-else-if=\"questionSaved\" class=\"small text-muted\">\r\n            <i class=\"fas fa-check text-success\"></i>\r\n            已儲存\r\n          </div>\r\n        </div>\r\n      </template>\r\n\r\n      <QuestionEdit v-if=\"currentEditQuestion\" v-model=\"currentEditQuestion\"\r\n        @saving=\"questionsSaving = true\"\r\n        @saved=\"questionSaved = true; questionsSaving = false\"\r\n      ></QuestionEdit>\r\n    </BModal>\r\n\r\n    <BModal\r\n      id=\"question-type-selector-modal\"\r\n      title=\"選擇題目類型\"\r\n      v-model=\"questionTypeSelectorModalOpen\"\r\n      no-footer\r\n      lazy\r\n      unmount-lazy\r\n    >\r\n      <QuestionTypeSelector @selected=\"newQuestionSelected\" />\r\n    </BModal>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>\r\n","<script setup lang=\"ts\">\r\nimport { uniqueItemList } from '@lyrasoft/ts-toolkit/vue';\r\nimport { deleteConfirm, route, useHttpClient } from '@windwalker-io/unicorn-next';\r\nimport {\r\n  BButton,\r\n  BFormGroup,\r\n  BFormInput,\r\n  BFormRadio,\r\n  BFormRadioGroup,\r\n  BModal,\r\n  BSpinner,\r\n  useModal\r\n} from 'bootstrap-vue-next';\r\nimport { computed, inject, onMounted, ref } from 'vue';\r\nimport { VueDraggable } from 'vue-draggable-plus';\r\nimport QuestionTypeSelector from '~melo/components/segment-edit/question/QuestionTypeSelector.vue';\r\nimport { useQuestionController } from '~melo/features/question/useQuestionController';\r\nimport { useSegmentEditor } from '~melo/features/segment/useSegmentEditor';\r\nimport { Question, Segment } from '~melo/types';\r\nimport QuestionItem from '../question/QuestionItem.vue';\r\nimport QuestionEdit from '../question/QuestionEdit.vue';\r\n\r\nconst item = defineModel<Segment>({\r\n  required: true\r\n});\r\n\r\nconst questions = ref<Question[]>([]);\r\nconst loading = ref<boolean>(false);\r\n\r\nonMounted(async () => {\r\n  await prepareQuestions();\r\n});\r\n\r\nconst { saving } = useSegmentEditor();\r\nconst { getQuestions, createEmptyQuestion, save, reorder: reorderQuestions, remove } = useQuestionController();\r\n\r\nasync function prepareQuestions() {\r\n  loading.value = true;\r\n\r\n  const items = await getQuestions(item.value.id!);\r\n\r\n  questions.value = uniqueItemList(items);\r\n\r\n  loading.value = false;\r\n}\r\n\r\nasync function reorder() {\r\n  const orders: Record<number, number> = {};\r\n\r\n  questions.value.forEach((item, i) => {\r\n    orders[item.id!] = i + 1;\r\n  });\r\n\r\n  await reorderQuestions(orders);\r\n}\r\n\r\nasync function deleteQuestion(id: number) {\r\n  questions.value = questions.value.filter(item => item.id !== id);\r\n}\r\n\r\n// New Question\r\nconst questionTypeSelectorModalOpen = ref(false);\r\n\r\nfunction newQuestion() {\r\n  questionTypeSelectorModalOpen.value = true;\r\n}\r\n\r\nasync function newQuestionSelected(type: string) {\r\n  const question = createEmptyQuestion(item.value.lessonId, item.value.id!);\r\n  question.type = type;\r\n  question.ordering = questions.value.length + 1;\r\n\r\n  const newItem = await save(question, 1);\r\n\r\n  questions.value.push(newItem);\r\n\r\n  editQuestion(newItem);\r\n}\r\n\r\n// Edit Question\r\nconst questionEditModalOpen = ref(false);\r\nconst currentEditQuestion = ref<Question>();\r\nconst questionsSaving = ref(false);\r\nconst questionSaved = ref(false);\r\n\r\nfunction editQuestion(question: Question) {\r\n  currentEditQuestion.value = question;\r\n  questionEditModalOpen.value = true;\r\n  questionsSaving.value = false;\r\n  questionSaved.value = false;\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <BFormGroup\r\n      label=\"小節名稱\"\r\n      label-for=\"input-section-title\"\r\n      label-class=\"mb-2\"\r\n      class=\"mb-5\"\r\n    >\r\n      <BFormInput id=\"input-section-title\" v-model=\"item.title\" trim />\r\n    </BFormGroup>\r\n\r\n    <BFormGroup\r\n      label=\"是否可跳過此測驗閱讀下一章節？\"\r\n      label-for=\"input-section-skip\"\r\n      label-class=\"mb-2\"\r\n      class=\"mb-5\"\r\n    >\r\n      <BFormRadioGroup\r\n        v-model=\"item.canSkip\"\r\n        button-variant=\"outline-primary\"\r\n        name=\"input-section-skip\"\r\n        buttons\r\n      >\r\n        <BFormRadio :value=\"true\">可以</BFormRadio>\r\n        <BFormRadio :value=\"false\">不可以</BFormRadio>\r\n      </BFormRadioGroup>\r\n    </BFormGroup>\r\n\r\n    <div class=\"c-quiz-edit d-flex flex-column gap-4\">\r\n      <div class=\"h6 c-quiz-edit__title\">\r\n        測驗內容\r\n      </div>\r\n\r\n      <div v-if=\"loading\" class=\"text-center\">\r\n        <BSpinner />\r\n      </div>\r\n\r\n      <div v-else class=\"c-quiz-list\">\r\n        <VueDraggable\r\n          v-model=\"questions\"\r\n          class=\"d-flex flex-column gap-2\"\r\n          item-key=\"uid\"\r\n          handle=\".handle\"\r\n          :animation=\"300\"\r\n          :on-update=\"reorder\"\r\n        >\r\n          <TransitionGroup name=\"fade\">\r\n            <QuestionItem\r\n              v-for=\"(element, index) in questions\"\r\n              :item=\"element\"\r\n              :key=\"element.id\"\r\n              :index=\"index\"\r\n              @edit=\"editQuestion\"\r\n              @delete=\"deleteQuestion\"\r\n              @saving=\"saving = true\"\r\n              @saved=\"saving = false;\"\r\n              style=\"animation-duration: 300ms;\"\r\n            ></QuestionItem>\r\n          </TransitionGroup>\r\n        </VueDraggable>\r\n      </div>\r\n\r\n      <div class=\"text-center\">\r\n        <button type=\"button\" class=\"btn btn-primary btn-sm text-nowrap\"\r\n          style=\"width: 150px;\"\r\n          @click=\"newQuestion\">\r\n          <i class=\"fas fa-plus\"></i>\r\n          新增題目\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Section Edit -->\r\n    <BModal\r\n      id=\"question-edit-modal\"\r\n      title=\"題目編輯\"\r\n      v-model=\"questionEditModalOpen\"\r\n      no-footer\r\n      lazy\r\n      unmount-lazy\r\n      size=\"lg\"\r\n      bodyBgVariant=\"light\"\r\n      contentClass=\"bg-white\"\r\n    >\r\n      <template #title>\r\n        <div class=\"d-flex align-items-center gap-3\">\r\n          <div>\r\n            題目編輯\r\n          </div>\r\n\r\n          <div v-if=\"questionsSaving\" class=\"text-muted small\">\r\n            <BSpinner small type=\"border\" class=\"me-1\" />\r\n            儲存中...\r\n          </div>\r\n          <div v-else-if=\"questionSaved\" class=\"small text-muted\">\r\n            <i class=\"fas fa-check text-success\"></i>\r\n            已儲存\r\n          </div>\r\n        </div>\r\n      </template>\r\n\r\n      <QuestionEdit v-if=\"currentEditQuestion\" v-model=\"currentEditQuestion\"\r\n        @saving=\"questionsSaving = true\"\r\n        @saved=\"questionSaved = true; questionsSaving = false\"\r\n      ></QuestionEdit>\r\n    </BModal>\r\n\r\n    <BModal\r\n      id=\"question-type-selector-modal\"\r\n      title=\"選擇題目類型\"\r\n      v-model=\"questionTypeSelectorModalOpen\"\r\n      no-footer\r\n      lazy\r\n      unmount-lazy\r\n    >\r\n      <QuestionTypeSelector @selected=\"newQuestionSelected\" />\r\n    </BModal>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>\r\n"],"names":["_hoisted_1$1","_hoisted_2","_sfc_main$1","_sfc_main$2","_hoisted_1","_sfc_main","_hoisted_3","_hoisted_4","_hoisted_6","_hoisted_7","_openBlock","_createElementBlock","_Fragment","_renderList","_createElementVNode","_normalizeClass","_withModifiers","_toDisplayString","_hoisted_5","_createTextVNode","data","_withDirectives","_vModelText","_createVNode","_useModel","_TransitionGroup","_withCtx","_createBlock","_createCommentVNode","_normalizeStyle","item"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}