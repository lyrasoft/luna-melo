{"version":3,"file":"SectionQuizEdit.js","sources":["../../src/components/segment-edit/question/QuestionTypeSelector.vue","../../src/components/segment-edit/question/QuestionTypeSelector.vue","../../src/components/segment-edit/question/QuestionItem.vue","../../src/components/segment-edit/question/QuestionItem.vue","../../src/components/segment-edit/section/SectionQuizEdit.vue","../../src/components/segment-edit/section/SectionQuizEdit.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { inject } from 'vue';\r\nimport { QuestionDefine } from '~melo/types';\r\n\r\nconst questionDefines = inject<Record<string, QuestionDefine>>('question.defines');\r\n\r\nconst emit = defineEmits<{\r\n  selected: [type: string];\r\n}>();\r\n\r\nfunction select(type: string) {\r\n  emit('selected', type);\r\n}\r\n\r\n</script>\r\n\r\n<template>\r\n  <div class=\"row row-cols-2 gy-3\">\r\n    <div v-for=\"(define, key) in questionDefines\" :key=\"define.id\" class=\"col\">\r\n      <div class=\"c-question-button card border h-100\">\r\n        <div class=\"card-body d-flex flex-column gap-3\">\r\n          <div class=\"d-flex align-items-center gap-2\">\r\n            <i :class=\"define.icon\" style=\"font-size: 2rem;\"></i>\r\n            <a href=\"#\" class=\"link-dark text-decoration-none stretched-link\"\r\n              @click.prevent=\"select(key)\">\r\n              <h3 class=\"m-0\">\r\n                {{ define.title }}\r\n              </h3>\r\n            </a>\r\n          </div>\r\n          <div class=\"text-muted small\">{{ define.description }}</div>\r\n          <div class=\"mt-auto\">\r\n            <button type=\"button\" class=\"btn btn-outline-primary btn-sm\">\r\n              按此選擇\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n.c-question-button {\r\n  transition: all .3s;\r\n\r\n  &:hover {\r\n    background-color: var(--bs-primary-bg-subtle);\r\n  }\r\n}\r\n</style>\r\n","<script setup lang=\"ts\">\r\nimport { inject } from 'vue';\r\nimport { QuestionDefine } from '~melo/types';\r\n\r\nconst questionDefines = inject<Record<string, QuestionDefine>>('question.defines');\r\n\r\nconst emit = defineEmits<{\r\n  selected: [type: string];\r\n}>();\r\n\r\nfunction select(type: string) {\r\n  emit('selected', type);\r\n}\r\n\r\n</script>\r\n\r\n<template>\r\n  <div class=\"row row-cols-2 gy-3\">\r\n    <div v-for=\"(define, key) in questionDefines\" :key=\"define.id\" class=\"col\">\r\n      <div class=\"c-question-button card border h-100\">\r\n        <div class=\"card-body d-flex flex-column gap-3\">\r\n          <div class=\"d-flex align-items-center gap-2\">\r\n            <i :class=\"define.icon\" style=\"font-size: 2rem;\"></i>\r\n            <a href=\"#\" class=\"link-dark text-decoration-none stretched-link\"\r\n              @click.prevent=\"select(key)\">\r\n              <h3 class=\"m-0\">\r\n                {{ define.title }}\r\n              </h3>\r\n            </a>\r\n          </div>\r\n          <div class=\"text-muted small\">{{ define.description }}</div>\r\n          <div class=\"mt-auto\">\r\n            <button type=\"button\" class=\"btn btn-outline-primary btn-sm\">\r\n              按此選擇\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n.c-question-button {\r\n  transition: all .3s;\r\n\r\n  &:hover {\r\n    background-color: var(--bs-primary-bg-subtle);\r\n  }\r\n}\r\n</style>\r\n","<script setup lang=\"ts\">\r\nimport { useDebounceFn } from '@vueuse/core';\r\nimport { deleteConfirm } from '@windwalker-io/unicorn-next';\r\nimport { toRefs } from 'vue';\r\nimport { useQuestionController } from '~melo/features/question/useQuestionController';\r\nimport { useQuestionPresenter } from '~melo/features/question/useQuestionPresenter';\r\nimport { Question } from '~melo/types';\r\n\r\nconst props = defineProps<{\r\n  item: Question;\r\n  index: number;\r\n}>();\r\n\r\nconst emit = defineEmits<{\r\n  'edit': [item: Question];\r\n  'delete': [itemId: number];\r\n  'save': [item: Question];\r\n  'saving': [];\r\n  'saved': [];\r\n}>();\r\n\r\nconst { save, remove } = useQuestionController();\r\nconst { typeToTitle, scoreLimit } = useQuestionPresenter();\r\n\r\nconst { item } = toRefs(props);\r\n\r\nfunction editQuestion() {\r\n  emit('edit', item.value);\r\n}\r\n\r\nasync function deleteQuestion() {\r\n  const v = await deleteConfirm(\r\n    \"確定要刪除這個問題嗎？\",\r\n    '',\r\n  );\r\n\r\n  if (v) {\r\n    await remove(item.value.id!);\r\n\r\n    emit('delete', item.value.id!);\r\n  }\r\n}\r\n\r\nconst changeScore = useDebounceFn(async () => {\r\n  item.value.score = scoreLimit(item.value.score);\r\n\r\n  emit('saving');\r\n\r\n  await save(item.value, 0);\r\n\r\n  emit('saved');\r\n}, 300);\r\n</script>\r\n\r\n<template>\r\n  <div class=\"c-question-item-outside\" :data-qn-id=\"item.id\">\r\n    <!-- Bar -->\r\n    <div class=\"c-question-item card border\">\r\n      <div class=\"c-question-item__content card-body p-1 d-flex align-items-center gap-2\" style=\"min-width: 1px\">\r\n        <div class=\"c-question-item__handle handle px-2\"\r\n          style=\"cursor: move; z-index: 3;\">\r\n          <span class=\"fal fa-bars\"></span>\r\n        </div>\r\n\r\n        <div class=\"text-nowrap text-muted\" style=\"min-width: 2em;\">\r\n          {{ props.index + 1 }}.\r\n        </div>\r\n\r\n        <div class=\"text-nowrap me-3\">\r\n          {{ typeToTitle(item.type) }}\r\n        </div>\r\n\r\n        <a href=\"#\" class=\"c-question-item__title text-truncate text-decoration-none\"\r\n          @click.prevent=\"editQuestion\">\r\n          {{ item.content || '題目內容未填寫' }}\r\n        </a>\r\n\r\n        <div class=\"d-flex align-items-center gap-3 text-nowrap ms-auto\">\r\n          <div class=\"text-nowrap me-1 d-flex align-items-center\">\r\n            <div class=\"me-1\">\r\n              分數\r\n            </div>\r\n            <div>\r\n              <input v-model=\"item.score\" type=\"number\" id=\"input-score\"\r\n                class=\"form-control form-control-sm\"\r\n                style=\"width: 5em;\"\r\n                @input=\"changeScore\" />\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"c-question-item__delete\">\r\n            <a href=\"javascript://\" class=\"link-danger\" @click=\"deleteQuestion\">\r\n              <i class=\"fal fa-trash\"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>\r\n","<script setup lang=\"ts\">\r\nimport { useDebounceFn } from '@vueuse/core';\r\nimport { deleteConfirm } from '@windwalker-io/unicorn-next';\r\nimport { toRefs } from 'vue';\r\nimport { useQuestionController } from '~melo/features/question/useQuestionController';\r\nimport { useQuestionPresenter } from '~melo/features/question/useQuestionPresenter';\r\nimport { Question } from '~melo/types';\r\n\r\nconst props = defineProps<{\r\n  item: Question;\r\n  index: number;\r\n}>();\r\n\r\nconst emit = defineEmits<{\r\n  'edit': [item: Question];\r\n  'delete': [itemId: number];\r\n  'save': [item: Question];\r\n  'saving': [];\r\n  'saved': [];\r\n}>();\r\n\r\nconst { save, remove } = useQuestionController();\r\nconst { typeToTitle, scoreLimit } = useQuestionPresenter();\r\n\r\nconst { item } = toRefs(props);\r\n\r\nfunction editQuestion() {\r\n  emit('edit', item.value);\r\n}\r\n\r\nasync function deleteQuestion() {\r\n  const v = await deleteConfirm(\r\n    \"確定要刪除這個問題嗎？\",\r\n    '',\r\n  );\r\n\r\n  if (v) {\r\n    await remove(item.value.id!);\r\n\r\n    emit('delete', item.value.id!);\r\n  }\r\n}\r\n\r\nconst changeScore = useDebounceFn(async () => {\r\n  item.value.score = scoreLimit(item.value.score);\r\n\r\n  emit('saving');\r\n\r\n  await save(item.value, 0);\r\n\r\n  emit('saved');\r\n}, 300);\r\n</script>\r\n\r\n<template>\r\n  <div class=\"c-question-item-outside\" :data-qn-id=\"item.id\">\r\n    <!-- Bar -->\r\n    <div class=\"c-question-item card border\">\r\n      <div class=\"c-question-item__content card-body p-1 d-flex align-items-center gap-2\" style=\"min-width: 1px\">\r\n        <div class=\"c-question-item__handle handle px-2\"\r\n          style=\"cursor: move; z-index: 3;\">\r\n          <span class=\"fal fa-bars\"></span>\r\n        </div>\r\n\r\n        <div class=\"text-nowrap text-muted\" style=\"min-width: 2em;\">\r\n          {{ props.index + 1 }}.\r\n        </div>\r\n\r\n        <div class=\"text-nowrap me-3\">\r\n          {{ typeToTitle(item.type) }}\r\n        </div>\r\n\r\n        <a href=\"#\" class=\"c-question-item__title text-truncate text-decoration-none\"\r\n          @click.prevent=\"editQuestion\">\r\n          {{ item.content || '題目內容未填寫' }}\r\n        </a>\r\n\r\n        <div class=\"d-flex align-items-center gap-3 text-nowrap ms-auto\">\r\n          <div class=\"text-nowrap me-1 d-flex align-items-center\">\r\n            <div class=\"me-1\">\r\n              分數\r\n            </div>\r\n            <div>\r\n              <input v-model=\"item.score\" type=\"number\" id=\"input-score\"\r\n                class=\"form-control form-control-sm\"\r\n                style=\"width: 5em;\"\r\n                @input=\"changeScore\" />\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"c-question-item__delete\">\r\n            <a href=\"javascript://\" class=\"link-danger\" @click=\"deleteQuestion\">\r\n              <i class=\"fal fa-trash\"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>\r\n","<script setup lang=\"ts\">\r\nimport { uniqueItemList } from '@lyrasoft/ts-toolkit/vue';\r\nimport { deleteConfirm, route, useHttpClient } from '@windwalker-io/unicorn-next';\r\nimport {\r\n  BButton,\r\n  BFormGroup,\r\n  BFormInput,\r\n  BFormRadio,\r\n  BFormRadioGroup,\r\n  BModal,\r\n  BSpinner,\r\n  useModal\r\n} from 'bootstrap-vue-next';\r\nimport { computed, inject, onMounted, ref } from 'vue';\r\nimport { VueDraggable } from 'vue-draggable-plus';\r\nimport QuestionTypeSelector from '~melo/components/segment-edit/question/QuestionTypeSelector.vue';\r\nimport { useQuestionController } from '~melo/features/question/useQuestionController';\r\nimport { useSegmentEditor } from '~melo/features/segment/useSegmentEditor';\r\nimport { Question, Segment } from '~melo/types';\r\nimport QuestionItem from '../question/QuestionItem.vue';\r\nimport QuestionEdit from '../question/QuestionEdit.vue';\r\n\r\nconst item = defineModel<Segment>({\r\n  required: true\r\n});\r\n\r\nconst questions = ref<Question[]>([]);\r\nconst loading = ref<boolean>(false);\r\n\r\nonMounted(async () => {\r\n  await prepareQuestions();\r\n});\r\n\r\nconst { saving } = useSegmentEditor();\r\nconst { getQuestions, createEmptyQuestion, save, reorder: reorderQuestions, remove } = useQuestionController();\r\n\r\nasync function prepareQuestions() {\r\n  loading.value = true;\r\n\r\n  const items = await getQuestions(item.value.id!);\r\n\r\n  questions.value = uniqueItemList(items);\r\n\r\n  loading.value = false;\r\n}\r\n\r\nasync function reorder() {\r\n  const orders: Record<number, number> = {};\r\n\r\n  questions.value.forEach((item, i) => {\r\n    orders[item.id!] = i + 1;\r\n  });\r\n\r\n  await reorderQuestions(orders);\r\n}\r\n\r\nasync function deleteQuestion(id: number) {\r\n  questions.value = questions.value.filter(item => item.id !== id);\r\n}\r\n\r\n// New Question\r\nconst questionTypeSelectorModalOpen = ref(false);\r\n\r\nfunction newQuestion() {\r\n  questionTypeSelectorModalOpen.value = true;\r\n}\r\n\r\nasync function newQuestionSelected(type: string) {\r\n  const question = createEmptyQuestion(item.value.lessonId, item.value.id!);\r\n  question.type = type;\r\n  question.ordering = questions.value.length + 1;\r\n\r\n  const newItem = await save(question, 1);\r\n\r\n  questions.value.push(newItem);\r\n\r\n  editQuestion(newItem);\r\n}\r\n\r\n// Edit Question\r\nconst questionEditModalOpen = ref(false);\r\nconst currentEditQuestion = ref<Question>();\r\nconst questionsSaving = ref(false);\r\nconst questionSaved = ref(false);\r\n\r\nfunction editQuestion(question: Question) {\r\n  currentEditQuestion.value = question;\r\n  questionEditModalOpen.value = true;\r\n  questionsSaving.value = false;\r\n  questionSaved.value = false;\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <BFormGroup\r\n      label=\"小節名稱\"\r\n      label-for=\"input-section-title\"\r\n      label-class=\"mb-2\"\r\n      class=\"mb-5\"\r\n    >\r\n      <BFormInput id=\"input-section-title\" v-model=\"item.title\" trim />\r\n    </BFormGroup>\r\n\r\n    <BFormGroup\r\n      label=\"是否可跳過此測驗閱讀下一章節？\"\r\n      label-for=\"input-section-skip\"\r\n      label-class=\"mb-2\"\r\n      class=\"mb-5\"\r\n    >\r\n      <BFormRadioGroup\r\n        v-model=\"item.canSkip\"\r\n        button-variant=\"outline-primary\"\r\n        name=\"input-section-skip\"\r\n        buttons\r\n      >\r\n        <BFormRadio :value=\"true\">可以</BFormRadio>\r\n        <BFormRadio :value=\"false\">不可以</BFormRadio>\r\n      </BFormRadioGroup>\r\n    </BFormGroup>\r\n\r\n    <div class=\"c-quiz-edit d-flex flex-column gap-4\">\r\n      <div class=\"h6 c-quiz-edit__title\">\r\n        測驗內容\r\n      </div>\r\n\r\n      <div v-if=\"loading\" class=\"text-center\">\r\n        <BSpinner />\r\n      </div>\r\n\r\n      <div v-else class=\"c-quiz-list\">\r\n        <VueDraggable\r\n          v-model=\"questions\"\r\n          class=\"d-flex flex-column gap-2\"\r\n          item-key=\"uid\"\r\n          handle=\".handle\"\r\n          :animation=\"300\"\r\n          :on-update=\"reorder\"\r\n        >\r\n          <TransitionGroup name=\"fade\">\r\n            <QuestionItem\r\n              v-for=\"(element, index) in questions\"\r\n              :item=\"element\"\r\n              :key=\"element.id\"\r\n              :index=\"index\"\r\n              @edit=\"editQuestion\"\r\n              @delete=\"deleteQuestion\"\r\n              @saving=\"saving = true\"\r\n              @saved=\"saving = false;\"\r\n              style=\"animation-duration: 300ms;\"\r\n            ></QuestionItem>\r\n          </TransitionGroup>\r\n        </VueDraggable>\r\n      </div>\r\n\r\n      <div class=\"text-center\">\r\n        <button type=\"button\" class=\"btn btn-primary btn-sm text-nowrap\"\r\n          style=\"width: 150px;\"\r\n          @click=\"newQuestion\">\r\n          <i class=\"fas fa-plus\"></i>\r\n          新增題目\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Section Edit -->\r\n    <BModal\r\n      id=\"question-edit-modal\"\r\n      title=\"題目編輯\"\r\n      v-model=\"questionEditModalOpen\"\r\n      no-footer\r\n      lazy\r\n      unmount-lazy\r\n      size=\"lg\"\r\n      bodyBgVariant=\"light\"\r\n      contentClass=\"bg-white\"\r\n    >\r\n      <template #title>\r\n        <div class=\"d-flex align-items-center gap-3\">\r\n          <div>\r\n            題目編輯\r\n          </div>\r\n\r\n          <div v-if=\"questionsSaving\" class=\"text-muted small\">\r\n            <BSpinner small type=\"border\" class=\"me-1\" />\r\n            儲存中...\r\n          </div>\r\n          <div v-else-if=\"questionSaved\" class=\"small text-muted\">\r\n            <i class=\"fas fa-check text-success\"></i>\r\n            已儲存\r\n          </div>\r\n        </div>\r\n      </template>\r\n\r\n      <QuestionEdit v-if=\"currentEditQuestion\" v-model=\"currentEditQuestion\"\r\n        @saving=\"questionsSaving = true\"\r\n        @saved=\"questionSaved = true; questionsSaving = false\"\r\n      ></QuestionEdit>\r\n    </BModal>\r\n\r\n    <BModal\r\n      id=\"question-type-selector-modal\"\r\n      title=\"選擇題目類型\"\r\n      v-model=\"questionTypeSelectorModalOpen\"\r\n      no-footer\r\n      lazy\r\n      unmount-lazy\r\n    >\r\n      <QuestionTypeSelector @selected=\"newQuestionSelected\" />\r\n    </BModal>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>\r\n","<script setup lang=\"ts\">\r\nimport { uniqueItemList } from '@lyrasoft/ts-toolkit/vue';\r\nimport { deleteConfirm, route, useHttpClient } from '@windwalker-io/unicorn-next';\r\nimport {\r\n  BButton,\r\n  BFormGroup,\r\n  BFormInput,\r\n  BFormRadio,\r\n  BFormRadioGroup,\r\n  BModal,\r\n  BSpinner,\r\n  useModal\r\n} from 'bootstrap-vue-next';\r\nimport { computed, inject, onMounted, ref } from 'vue';\r\nimport { VueDraggable } from 'vue-draggable-plus';\r\nimport QuestionTypeSelector from '~melo/components/segment-edit/question/QuestionTypeSelector.vue';\r\nimport { useQuestionController } from '~melo/features/question/useQuestionController';\r\nimport { useSegmentEditor } from '~melo/features/segment/useSegmentEditor';\r\nimport { Question, Segment } from '~melo/types';\r\nimport QuestionItem from '../question/QuestionItem.vue';\r\nimport QuestionEdit from '../question/QuestionEdit.vue';\r\n\r\nconst item = defineModel<Segment>({\r\n  required: true\r\n});\r\n\r\nconst questions = ref<Question[]>([]);\r\nconst loading = ref<boolean>(false);\r\n\r\nonMounted(async () => {\r\n  await prepareQuestions();\r\n});\r\n\r\nconst { saving } = useSegmentEditor();\r\nconst { getQuestions, createEmptyQuestion, save, reorder: reorderQuestions, remove } = useQuestionController();\r\n\r\nasync function prepareQuestions() {\r\n  loading.value = true;\r\n\r\n  const items = await getQuestions(item.value.id!);\r\n\r\n  questions.value = uniqueItemList(items);\r\n\r\n  loading.value = false;\r\n}\r\n\r\nasync function reorder() {\r\n  const orders: Record<number, number> = {};\r\n\r\n  questions.value.forEach((item, i) => {\r\n    orders[item.id!] = i + 1;\r\n  });\r\n\r\n  await reorderQuestions(orders);\r\n}\r\n\r\nasync function deleteQuestion(id: number) {\r\n  questions.value = questions.value.filter(item => item.id !== id);\r\n}\r\n\r\n// New Question\r\nconst questionTypeSelectorModalOpen = ref(false);\r\n\r\nfunction newQuestion() {\r\n  questionTypeSelectorModalOpen.value = true;\r\n}\r\n\r\nasync function newQuestionSelected(type: string) {\r\n  const question = createEmptyQuestion(item.value.lessonId, item.value.id!);\r\n  question.type = type;\r\n  question.ordering = questions.value.length + 1;\r\n\r\n  const newItem = await save(question, 1);\r\n\r\n  questions.value.push(newItem);\r\n\r\n  editQuestion(newItem);\r\n}\r\n\r\n// Edit Question\r\nconst questionEditModalOpen = ref(false);\r\nconst currentEditQuestion = ref<Question>();\r\nconst questionsSaving = ref(false);\r\nconst questionSaved = ref(false);\r\n\r\nfunction editQuestion(question: Question) {\r\n  currentEditQuestion.value = question;\r\n  questionEditModalOpen.value = true;\r\n  questionsSaving.value = false;\r\n  questionSaved.value = false;\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <BFormGroup\r\n      label=\"小節名稱\"\r\n      label-for=\"input-section-title\"\r\n      label-class=\"mb-2\"\r\n      class=\"mb-5\"\r\n    >\r\n      <BFormInput id=\"input-section-title\" v-model=\"item.title\" trim />\r\n    </BFormGroup>\r\n\r\n    <BFormGroup\r\n      label=\"是否可跳過此測驗閱讀下一章節？\"\r\n      label-for=\"input-section-skip\"\r\n      label-class=\"mb-2\"\r\n      class=\"mb-5\"\r\n    >\r\n      <BFormRadioGroup\r\n        v-model=\"item.canSkip\"\r\n        button-variant=\"outline-primary\"\r\n        name=\"input-section-skip\"\r\n        buttons\r\n      >\r\n        <BFormRadio :value=\"true\">可以</BFormRadio>\r\n        <BFormRadio :value=\"false\">不可以</BFormRadio>\r\n      </BFormRadioGroup>\r\n    </BFormGroup>\r\n\r\n    <div class=\"c-quiz-edit d-flex flex-column gap-4\">\r\n      <div class=\"h6 c-quiz-edit__title\">\r\n        測驗內容\r\n      </div>\r\n\r\n      <div v-if=\"loading\" class=\"text-center\">\r\n        <BSpinner />\r\n      </div>\r\n\r\n      <div v-else class=\"c-quiz-list\">\r\n        <VueDraggable\r\n          v-model=\"questions\"\r\n          class=\"d-flex flex-column gap-2\"\r\n          item-key=\"uid\"\r\n          handle=\".handle\"\r\n          :animation=\"300\"\r\n          :on-update=\"reorder\"\r\n        >\r\n          <TransitionGroup name=\"fade\">\r\n            <QuestionItem\r\n              v-for=\"(element, index) in questions\"\r\n              :item=\"element\"\r\n              :key=\"element.id\"\r\n              :index=\"index\"\r\n              @edit=\"editQuestion\"\r\n              @delete=\"deleteQuestion\"\r\n              @saving=\"saving = true\"\r\n              @saved=\"saving = false;\"\r\n              style=\"animation-duration: 300ms;\"\r\n            ></QuestionItem>\r\n          </TransitionGroup>\r\n        </VueDraggable>\r\n      </div>\r\n\r\n      <div class=\"text-center\">\r\n        <button type=\"button\" class=\"btn btn-primary btn-sm text-nowrap\"\r\n          style=\"width: 150px;\"\r\n          @click=\"newQuestion\">\r\n          <i class=\"fas fa-plus\"></i>\r\n          新增題目\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Section Edit -->\r\n    <BModal\r\n      id=\"question-edit-modal\"\r\n      title=\"題目編輯\"\r\n      v-model=\"questionEditModalOpen\"\r\n      no-footer\r\n      lazy\r\n      unmount-lazy\r\n      size=\"lg\"\r\n      bodyBgVariant=\"light\"\r\n      contentClass=\"bg-white\"\r\n    >\r\n      <template #title>\r\n        <div class=\"d-flex align-items-center gap-3\">\r\n          <div>\r\n            題目編輯\r\n          </div>\r\n\r\n          <div v-if=\"questionsSaving\" class=\"text-muted small\">\r\n            <BSpinner small type=\"border\" class=\"me-1\" />\r\n            儲存中...\r\n          </div>\r\n          <div v-else-if=\"questionSaved\" class=\"small text-muted\">\r\n            <i class=\"fas fa-check text-success\"></i>\r\n            已儲存\r\n          </div>\r\n        </div>\r\n      </template>\r\n\r\n      <QuestionEdit v-if=\"currentEditQuestion\" v-model=\"currentEditQuestion\"\r\n        @saving=\"questionsSaving = true\"\r\n        @saved=\"questionSaved = true; questionsSaving = false\"\r\n      ></QuestionEdit>\r\n    </BModal>\r\n\r\n    <BModal\r\n      id=\"question-type-selector-modal\"\r\n      title=\"選擇題目類型\"\r\n      v-model=\"questionTypeSelectorModalOpen\"\r\n      no-footer\r\n      lazy\r\n      unmount-lazy\r\n    >\r\n      <QuestionTypeSelector @selected=\"newQuestionSelected\" />\r\n    </BModal>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>\r\n"],"names":["_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_6","_hoisted_7","_openBlock","_createElementBlock","_Fragment","_renderList","_createElementVNode","_normalizeClass","_withModifiers","_toDisplayString","_hoisted_5","_createTextVNode","_withDirectives","_vModelText","_useModel","item","_createVNode","_withCtx","_TransitionGroup","_createBlock","_createCommentVNode"],"mappings":"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"}