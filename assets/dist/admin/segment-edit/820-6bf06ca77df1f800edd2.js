(self.webpackChunk_vue_entries_admin_segment_edit_ts=self.webpackChunk_vue_entries_admin_segment_edit_ts||[]).push([[820],{919:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var o=a(354),l=a.n(o),n=a(314),d=a.n(n)()(l());d.push([e.id,".l-section-video-edit .rwd-video[data-v-663d4548]{position:relative;padding-bottom:56.25%;padding-top:30px;height:0;overflow:hidden}.l-section-video-edit .rwd-video>iframe[data-v-663d4548],.l-section-video-edit .rwd-video>embed[data-v-663d4548],.l-section-video-edit .rwd-video>object[data-v-663d4548]{position:absolute;top:0;left:0;width:100%;height:100%;border:0}.l-section-video-edit #input-section-video[data-v-663d4548]{border-radius:.25rem 0 0 .25rem}.l-section-video-edit .c-video-submit[data-v-663d4548]{border-radius:0 .25rem .25rem 0}","",{version:3,sources:["webpack://./vue/components/segment-edit/section/SectionVideoEdit.vue"],names:[],mappings:"AAEE,kDACE,iBAAA,CACA,qBAAA,CACA,gBAAA,CACA,QAAA,CACA,eAAA,CAEA,0KAGE,iBAAA,CACA,KAAA,CACA,MAAA,CACA,UAAA,CACA,WAAA,CACA,QAAA,CAIJ,4DACE,+BAAA,CAGF,uDACE,+BAAA",sourcesContent:[".l-section-video-edit .rwd-video{position:relative;padding-bottom:56.25%;padding-top:30px;height:0;overflow:hidden}.l-section-video-edit .rwd-video>iframe,.l-section-video-edit .rwd-video>embed,.l-section-video-edit .rwd-video>object{position:absolute;top:0;left:0;width:100%;height:100%;border:0}.l-section-video-edit #input-section-video{border-radius:.25rem 0 0 .25rem}.l-section-video-edit .c-video-submit{border-radius:0 .25rem .25rem 0}"],sourceRoot:""}]);const i=d},903:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var o=a(354),l=a.n(o),n=a(314),d=a.n(n)()(l());d.push([e.id,".c-file-uploader__card-body[data-v-56a6fddb]{height:200px;position:relative}.c-file-uploader__inner[data-v-56a6fddb]{margin:0;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}","",{version:3,sources:["webpack://./vue/components/uploader/FileUploader.vue"],names:[],mappings:"AAGE,6CACE,YAAA,CACA,iBAAA,CAGF,yCACE,QAAA,CACA,iBAAA,CACA,OAAA,CACA,QAAA,CACA,+BAAA",sourcesContent:[".c-file-uploader__card-body{height:200px;position:relative}.c-file-uploader__inner{margin:0;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}"],sourceRoot:""}]);const i=d},820:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>I});var o=a(508),l=a(1),n=a.n(l);const d={class:"c-file-uploader__card card overflow-hidden position-relative"},i={class:"c-file-uploader__card-body card-body"},r={class:"c-file-uploader__inner"},c={key:0,class:"text-center"},s={key:1},m={class:"text-center"},v={class:"d-none"},p=["accept"],A=(0,o.defineComponent)({__name:"FileUploader",props:{accept:{}},emits:["uploaded","clear"],setup(e,{emit:t}){const a=e,l=t,n=(0,o.ref)(),A=(0,o.ref)(!1),f=(0,o.ref)(!1);function C(){n.value.click()}async function b(e){if(A.value){const t=e.target.files||e.dataTransfer.files;await N(t[0])}}async function V(e){f.value=!0,await N(e.target.files[0]),f.value=!1}async function N(e){if(null===e)return void alert("沒有上傳檔案");f.value=!0;let t=new FormData;t.append("file",e,e.name),t.append(u.data("csrf-token"),"1");const a=await u.$http.post(u.route("video_file_upload"),t,{headers:{"Content-Type":"multipart/form-data"}});l("uploaded",a.data.data.url,e.name),f.value=!1}return(e,t)=>{const l=(0,o.resolveComponent)("BSpinner"),u=(0,o.resolveComponent)("BButton");return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:"c-file-uploader pb-3",onDragover:t[0]||(t[0]=(0,o.withModifiers)((e=>A.value=!0),["prevent"])),onDragleave:t[1]||(t[1]=(0,o.withModifiers)((e=>A.value=!1),["prevent"])),onDrop:(0,o.withModifiers)(b,["prevent"])},[(0,o.createElementVNode)("div",d,[(0,o.createElementVNode)("div",i,[(0,o.createElementVNode)("div",r,[f.value?((0,o.openBlock)(),(0,o.createElementBlock)("div",c,[(0,o.createVNode)(l)])):((0,o.openBlock)(),(0,o.createElementBlock)("div",s,[t[3]||(t[3]=(0,o.createElementVNode)("div",{class:"text-center mb-3"},[(0,o.createElementVNode)("i",{class:"far fa-upload fa-fw fa-2x"})],-1)),t[4]||(t[4]=(0,o.createElementVNode)("div",{class:"text-center mb-3"}," 上傳: 拖拉檔案或按此瀏覽 ",-1)),(0,o.createElementVNode)("div",m,[(0,o.createVNode)(u,{variant:"primary",onClick:C},{default:(0,o.withCtx)((()=>t[2]||(t[2]=[(0,o.createTextVNode)(" 上傳 ")]))),_:1})])]))])])]),(0,o.createElementVNode)("div",v,[(0,o.createElementVNode)("input",{ref_key:"fileInput",ref:n,type:"file",onChange:V,accept:a.accept},null,40,p)])],32)}}});a(90);var f=a(262);const C=(0,f.A)(A,[["__scopeId","data-v-56a6fddb"]]),b={class:"l-section-video-edit"},V={class:"d-flex"},N={key:0},k={key:1,class:"mb-3 d-flex justify-content-between align-items-center"},E={class:"m-0"},_={class:"ml-auto"},h={key:0},B={key:1,class:"mb-3 d-flex"},w={class:"m-0"},y={class:"ml-auto"},x={key:2,class:"mt-4"},g={key:0,class:"rwd-video"},D=["src"],S={key:1},U=["src"],F=(0,o.defineComponent)({__name:"SectionVideoEdit",props:{item:{}},emits:["save"],setup(e,{emit:t}){const a=e,l=t,d=(0,o.ref)(a.item),i=(0,o.computed)((()=>r.value?d.value.filename:d.value.src)),r=(0,o.computed)((()=>""!==d.value.src&&null===u.value)),c=(0,o.computed)((()=>""!==d.value.src&&null!==u.value)),s=(0,o.ref)(""),u=(0,o.computed)((()=>{if(""!==d.value.src)return n().parse(d.value.src)})),m=(0,o.computed)((()=>{if(""!==d.value.src)return n().create({videoInfo:u.value,format:"embed"})}));async function v(e){await swal({title:"確定要刪除嗎？此動作無法重置",buttons:["取消","確認"]})&&(a.item[e]="",l("save",d.value))}function p(){d.value.src=s.value,l("save",d.value)}async function A(e){d.value.src=e,l("save",d.value)}async function f(e){d.value.captionSrc=e,l("save",d.value)}return(e,t)=>{const a=(0,o.resolveComponent)("BFormInput"),l=(0,o.resolveComponent)("BFormGroup"),n=(0,o.resolveComponent)("BButton"),r=(0,o.resolveComponent)("b-button");return(0,o.openBlock)(),(0,o.createElementBlock)("div",b,[(0,o.createVNode)(l,{label:"小節名稱編輯","label-for":"input-section-title","label-class":"mb-2",class:"mb-5"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(a,{id:"input-section-title",modelValue:d.value.title,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value.title=e),trim:""},null,8,["modelValue"])])),_:1}),""===d.value.src?((0,o.openBlock)(),(0,o.createBlock)(l,{key:0,label:"影片連結","label-for":"input-section-video","label-class":"mb-2",description:"支援以下平台: Youtube, Vimeo, Dailymotion",class:"mb-5"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",V,[(0,o.createVNode)(a,{id:"input-section-video",modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value=e),placeholder:"請輸入影片網址",trim:""},null,8,["modelValue"]),(0,o.createVNode)(n,{variant:"primary",class:"text-nowrap c-video-submit",onClick:p},{default:(0,o.withCtx)((()=>t[5]||(t[5]=[(0,o.createTextVNode)(" 送出 ")]))),_:1})])])),_:1})):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(l,{class:"mb-3"},{default:(0,o.withCtx)((()=>[""===d.value.src?((0,o.openBlock)(),(0,o.createElementBlock)("div",N,[t[6]||(t[6]=(0,o.createElementVNode)("label",{class:"mb-2"}," 上傳影片 ",-1)),t[7]||(t[7]=(0,o.createElementVNode)("br",null,null,-1)),t[8]||(t[8]=(0,o.createElementVNode)("div",{class:"text-muted mb-2"},[(0,o.createElementVNode)("small",null," 請上傳1280x720(720p)或1920x1080(1080p)尺寸，格式為.mp4的文件 ")],-1)),(0,o.createVNode)(C,{accept:"video/mp4",onUploaded:A})])):(0,o.createCommentVNode)("",!0),d.value.src?((0,o.openBlock)(),(0,o.createElementBlock)("div",k,[(0,o.createElementVNode)("h6",E,[t[9]||(t[9]=(0,o.createElementVNode)("span",{class:"fal fa-video me-2"},null,-1)),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(i.value),1)]),(0,o.createElementVNode)("div",_,[(0,o.createVNode)(r,{variant:"danger",onClick:t[2]||(t[2]=e=>v("src"))},{default:(0,o.withCtx)((()=>t[10]||(t[10]=[(0,o.createElementVNode)("span",{class:"fal fa-trash"},null,-1)]))),_:1})])])):(0,o.createCommentVNode)("",!0)])),_:1}),(0,o.createVNode)(l,null,{default:(0,o.withCtx)((()=>[""===d.value.captionSrc?((0,o.openBlock)(),(0,o.createElementBlock)("div",h,[t[11]||(t[11]=(0,o.createElementVNode)("label",{class:"mb-2"}," 上傳字幕 ",-1)),t[12]||(t[12]=(0,o.createElementVNode)("br",null,null,-1)),t[13]||(t[13]=(0,o.createElementVNode)("div",{class:"text-muted mb-2"},[(0,o.createElementVNode)("small",null," 僅支援格式為.vtt的文件 ")],-1)),(0,o.createVNode)(C,{accept:".vtt",onUploaded:f})])):(0,o.createCommentVNode)("",!0),d.value.captionSrc?((0,o.openBlock)(),(0,o.createElementBlock)("div",B,[(0,o.createElementVNode)("h6",w,[t[14]||(t[14]=(0,o.createElementVNode)("span",{class:"fal fa-closed-captioning"},null,-1)),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(d.value.captionSrc),1)]),(0,o.createElementVNode)("div",y,[(0,o.createVNode)(r,{variant:"danger",onClick:t[3]||(t[3]=e=>v("captionSrc"))},{default:(0,o.withCtx)((()=>t[15]||(t[15]=[(0,o.createElementVNode)("span",{class:"fal fa-trash"},null,-1)]))),_:1})])])):(0,o.createCommentVNode)("",!0)])),_:1}),c.value?((0,o.openBlock)(),(0,o.createBlock)(l,{key:1,label:"影片時數 (秒)","label-for":"input-section-duration","label-class":"mb-2"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(a,{id:"input-section-duration",modelValue:d.value.duration,"onUpdate:modelValue":t[4]||(t[4]=e=>d.value.duration=e),trim:""},null,8,["modelValue"])])),_:1})):(0,o.createCommentVNode)("",!0),""!==d.value.src?((0,o.openBlock)(),(0,o.createElementBlock)("div",x,[m.value?((0,o.openBlock)(),(0,o.createElementBlock)("div",g,[(0,o.createElementVNode)("iframe",{src:m.value,frameborder:"0",style:{width:"100%"}},null,8,D)])):((0,o.openBlock)(),(0,o.createElementBlock)("div",S,[(0,o.createElementVNode)("video",{controls:"",class:"w-100",src:d.value.src},null,8,U)]))])):(0,o.createCommentVNode)("",!0)])}}});a(290);const I=(0,f.A)(F,[["__scopeId","data-v-663d4548"]])},290:(e,t,a)=>{var o=a(919);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),(0,a(534).A)("738443f1",o,!0,{})},90:(e,t,a)=>{var o=a(903);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),(0,a(534).A)("47d43270",o,!0,{})}}]);
//# sourceMappingURL=820.js.map