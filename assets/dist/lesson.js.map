{"version":3,"sources":["lesson.js"],"names":["System","register","_export","_context","async","buy","el","lessonId","dataset","id","Error","u","$http","post","data","e","console","error","sendAddAction","alert","message","location","href","route","setters","_main","execute","delegate","document","currentTarget"],"mappings":"AAAAA,OAAOC,SAAS,CAAC,UAAU,SAAUC,EAASC,GA4B9CC,eAAeC,EAAIC,GACjB,UAvBFF,eAA6BE,GAC3B,MAAMC,EAAWD,EAAGE,QAAQC,GAE5B,IAAKF,EACH,MAAM,IAAIG,MAAM,gBAGlB,IAQE,aAPkBC,EAAEC,MAAMC,KACxB,uBACA,CACEJ,GAAIF,KAIGO,IACb,CAAE,MAAOC,GAEP,MADAC,QAAQC,MAAMF,GACRA,CACR,CACF,CAIUG,CAAcZ,EACtB,CAAE,MAAOS,GAEP,YADAJ,EAAEQ,MAAMJ,EAAEK,QAAS,GAAI,UAEzB,CAMAC,SAASC,KAAOX,EAAEY,MAAM,OAH1B,CAIC,MAAA,CAAAC,QAAA,CAAA,SAAAC,GAAA,GAAAC,QAAA,WAvCDf,EAAEgB,SAASC,SAAU,kBAAmB,SAAUb,IAChDV,EAAIU,EAAEc,cAAc,GACnB,EAAA","file":"lesson.js","sourcesContent":["import '@main';\n\nu.delegate(document, '[data-task=buy]', 'click', (e) => {\n  buy(e.currentTarget);\n});\n\nasync function sendAddAction(el) {\n  const lessonId = el.dataset.id;\n\n  if (!lessonId) {\n    throw new Error('No lesson ID');\n  }\n\n  try {\n    const res = await u.$http.post(\n      '@cart_ajax/addToCart',\n      {\n        id: lessonId,\n      }\n    );\n\n    return res.data;\n  } catch (e) {\n    console.error(e);\n    throw e;\n  }\n}\n\nasync function buy(el) {\n  try {\n    await sendAddAction(el);\n  } catch (e) {\n    u.alert(e.message, '', 'warning');\n    return;\n  }\n\n  toCartPage();\n}\n\nfunction toCartPage() {\n  location.href = u.route('cart');\n}\n"]}