{"version":3,"file":"lesson.js","names":["sendAddAction","el","lessonId","dataset","id","Error","res","u","$http","post","data","e","console","error","buy","alert","message","toCartPage","location","href","route","setters","_main","execute","delegate","document","currentTarget"],"sources":["lesson.js"],"sourcesContent":["import '@main';\n\nu.delegate(document, '[data-task=buy]', 'click', (e) => {\n  buy(e.currentTarget);\n});\n\nasync function sendAddAction(el) {\n  const lessonId = el.dataset.id;\n\n  if (!lessonId) {\n    throw new Error('No lesson ID');\n  }\n\n  try {\n    const res = await u.$http.post(\n      '@cart_ajax/addToCart',\n      {\n        id: lessonId,\n      }\n    );\n\n    return res.data;\n  } catch (e) {\n    console.error(e);\n    throw e;\n  }\n}\n\nasync function buy(el) {\n  try {\n    await sendAddAction(el);\n  } catch (e) {\n    u.alert(e.message, '', 'warning');\n    return;\n  }\n\n  toCartPage();\n}\n\nfunction toCartPage() {\n  location.href = u.route('cart');\n}\n"],"mappings":";;;EAMA,eAAeA,aAAaA,CAACC,EAAE,EAAE;IAC/B,MAAMC,QAAQ,GAAGD,EAAE,CAACE,OAAO,CAACC,EAAE;IAE9B,IAAI,CAACF,QAAQ,EAAE;MACb,MAAM,IAAIG,KAAK,CAAC,cAAc,CAAC;IACjC;IAEA,IAAI;MACF,MAAMC,GAAG,GAAG,MAAMC,CAAC,CAACC,KAAK,CAACC,IAAI,CAC5B,sBAAsB,EACtB;QACEL,EAAE,EAAEF;MACN,CACF,CAAC;MAED,OAAOI,GAAG,CAACI,IAAI;IACjB,CAAC,CAAC,OAAOC,CAAC,EAAE;MACVC,OAAO,CAACC,KAAK,CAACF,CAAC,CAAC;MAChB,MAAMA,CAAC;IACT;EACF;EAEA,eAAeG,GAAGA,CAACb,EAAE,EAAE;IACrB,IAAI;MACF,MAAMD,aAAa,CAACC,EAAE,CAAC;IACzB,CAAC,CAAC,OAAOU,CAAC,EAAE;MACVJ,CAAC,CAACQ,KAAK,CAACJ,CAAC,CAACK,OAAO,EAAE,EAAE,EAAE,SAAS,CAAC;MACjC;IACF;IAEAC,UAAU,CAAC,CAAC;EACd;EAEA,SAASA,UAAUA,CAAA,EAAG;IACpBC,QAAQ,CAACC,IAAI,GAAGZ,CAAC,CAACa,KAAK,CAAC,MAAM,CAAC;EACjC;EAAC;IAAAC,OAAA,aAAAC,KAAA;IAAAC,OAAA,WAAAA,CAAA;MAvCDhB,CAAC,CAACiB,QAAQ,CAACC,QAAQ,EAAE,iBAAiB,EAAE,OAAO,EAAGd,CAAC,IAAK;QACtDG,GAAG,CAACH,CAAC,CAACe,aAAa,CAAC;MACtB,CAAC,CAAC;IAAC;EAAA;AAAA","ignoreList":[]}